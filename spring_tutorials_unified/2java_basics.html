<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>第2章 基礎知識を身に付けよう - Spring Framework入門</title>

        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&family=M+PLUS+Rounded+1c:wght@400;500;700&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <!-- グローバルナビゲーション -->
        <nav class="global-nav">
            <div class="nav-container">
                <a href="1spring-framework-tutorial.html" class="nav-logo">
                    <span class="nav-logo-icon">🌱</span>
                    <span>Spring入門</span>
                </a>
                <button class="nav-toggle" onclick="toggleMenu()" aria-label="メニュー">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="nav-menu">
                    <div class="nav-menu-title">📚 章を選択</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="0promptprograming.html" class="nav-link">
                                <span class="nav-chapter-num">0</span>
                                <span>プロンプトプログラミング</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="1spring-framework-tutorial.html" class="nav-link">
                                <span class="nav-chapter-num">1</span>
                                <span>Spring Frameworkについて知ろう</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="2java_basics.html" class="nav-link active">
                                <span class="nav-chapter-num">2</span>
                                <span>基礎知識を身に付けよう</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="3di-tutorial.html" class="nav-link">
                                <span class="nav-chapter-num">3</span>
                                <span>DIを知ろう</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="4aop-tutorial.html" class="nav-link">
                                <span class="nav-chapter-num">4</span>
                                <span>AOPを知ろう</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="5mvc-tutorial.html" class="nav-link">
                                <span class="nav-chapter-num">5</span>
                                <span>MVCを知ろう</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="6thymeleaf-tutorial.html" class="nav-link">
                                <span class="nav-chapter-num">6</span>
                                <span>Thymeleafを知ろう</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="7ServerDataSubmission.html" class="nav-link">
                                <span class="nav-chapter-num">7</span>
                                <span>サーバーへのデータ送信</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="8Validation_Textbook_Rewrite.html" class="nav-link">
                                <span class="nav-chapter-num">8</span>
                                <span>バリデーション</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="9_MyBatis_Tutorial__2_.html" class="nav-link">
                                <span class="nav-chapter-num">9</span>
                                <span>MyBatisチュートリアル</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="10app-preparation-tutorial.html" class="nav-link">
                                <span class="nav-chapter-num">10</span>
                                <span>アプリケーション作成準備</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="11-database-operations.html" class="nav-link">
                                <span class="nav-chapter-num">11</span>
                                <span>データベース操作</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="12service-tutorial.html" class="nav-link">
                                <span class="nav-chapter-num">12</span>
                                <span>サービス層</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="13_application_layer.html" class="nav-link">
                                <span class="nav-chapter-num">13</span>
                                <span>アプリケーション層</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="14_validation.html" class="nav-link">
                                <span class="nav-chapter-num">14</span>
                                <span>バリデーション（応用）</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="15-spring-security-tutorial.html" class="nav-link">
                                <span class="nav-chapter-num">15</span>
                                <span>Spring Security</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="container">
            <!-- ヘッダー -->
            <header class="chapter-header">
                <div class="chapter-badge">📘 Chapter</div>
                <div class="chapter-number">2</div>
                <h1 class="chapter-title">基礎知識を身に付けよう</h1>
            </header>

            <!-- Table of Contents -->
            <nav class="toc">
                <h2 class="toc-title">📑 この章で学ぶこと</h2>
                <ul class="toc-list">
                    <li class="toc-item">
                        <span class="toc-number">2-1</span>
                        <span>Javaの基礎知識を復習しよう</span>
                    </li>
                    <li class="toc-item">
                        <span class="toc-number">2-2</span>
                        <span>Webアプリケーション作成の必須知識を確認しよう</span>
                    </li>
                    <li class="toc-item">
                        <span class="toc-number">2-3</span>
                        <span>開発で使用する便利なライブラリとツールを知ろう</span>
                    </li>
                </ul>
            </nav>

            <!-- Main Content -->

            <!-- Section 2-1 -->
            <section id="section-2-1" class="section">
                <div class="section-header">
                    <span class="section-number">Section 2-1</span>
                    <h2 class="section-title">Javaの基礎知識を復習しよう</h2>
                </div>

                <p>
                    Spring
                    Frameworkの具体的な説明に入る前準備として、Javaの基礎知識から「インターフェース」と「依存性」について確認しましょう。後のハンズオンを実施するための必須知識となるため、既に知っている方も復習を兼ねて参照をお願いします。
                </p>

                <!-- 2-1-1 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-1-1</span>
                        <h3>インターフェースとは？</h3>
                    </div>

                    <p>
                        Javaにはクラスに含まれるメソッドの具体的な処理内容は記述せず、定数とメソッドの型のみを定義した<strong>インターフェース</strong>というものがあります。インターフェースを使用するメリットについては、「2-1-3
                        依存性とは?」にて説明しますので、ここではインターフェースの構文を説明します。
                    </p>

                    <div class="highlight-box">
                        <p>
                            <strong>📌 ポイント</strong
                            ><br />インターフェースは、他のクラスで実装することを前提に作成されています。そのためインターフェースで宣言したメソッドは、暗黙的に「public
                            abstract」アクセス修飾子がつき、「抽象メソッド」と呼ばれます。
                        </p>
                    </div>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ インターフェースの宣言</h4>
                    <p>インターフェースを宣言するには、「interface」キーワードを使用します。</p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">Greet.java - インターフェース宣言</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">public interface</span> <span class="code-type">Greet</span> {
    <span class="code-comment">/**
    * 挨拶をする
    */</span>
    <span class="code-keyword">void</span> greeting();
}</pre>
                        </div>
                    </div>

                    <p>
                        また、インターフェースで変数を宣言した場合、暗黙的に「public static
                        final」修飾子がつき「定数」になります。
                    </p>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ インターフェースの実装</h4>
                    <p>
                        インターフェースを実装する時は「implements」キーワードを使用します。インターフェース実装時には、インターフェースで定義されている抽象メソッドをすべて実装する必要があり、実装しない場合は「コンパイルエラー」になります。
                    </p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">MorningGreet.java - インターフェースを実装</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">public class</span> <span class="code-type">MorningGreet</span> <span class="code-keyword">implements</span> <span class="code-type">Greet</span> {
    <span class="code-annotation">@Override</span>
    <span class="code-keyword">public void</span> greeting() {
        System.out.println(<span class="code-string">"おはようございます！"</span>);
    }
}</pre>
                        </div>
                    </div>

                    <div class="highlight-box success">
                        <p>
                            <strong>💡 @Overrideアノテーション</strong
                            ><br />「@Override」は、「オーバーライドしてます」という注釈です。「オーバーライド」とは「スーパークラスやインターフェースのメソッドを継承や実装しているクラスで再定義すること」を意味します。つまり@Overrideをメソッドへ付与することで、「これはオーバーライドメソッドです。もしオーバーライドされていなければエラーです。」と教えてくれます。
                        </p>
                    </div>
                </div>

                <!-- 2-1-2 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-1-2</span>
                        <h3>コンパイルエラーとは？</h3>
                    </div>

                    <p>
                        コンピュータがプログラムを実行するためには、人間が書いたプログラムのコードを、コンピュータが理解できる言語に変換する必要があります。この変換プロセスを「コンパイル」と言います。
                    </p>

                    <div class="diagram">
                        <svg width="580" height="220" viewBox="0 0 580 220">
                            <!-- Source Code Box -->
                            <rect
                                x="20"
                                y="80"
                                width="120"
                                height="60"
                                rx="10"
                                fill="#f1f5f9"
                                stroke="#cbd5e1"
                                stroke-width="2"
                            />
                            <text
                                x="80"
                                y="105"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="12"
                                fill="#475569"
                            >
                                ソースコード
                            </text>
                            <text
                                x="80"
                                y="125"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="10"
                                fill="#94a3b8"
                            >
                                (.java)
                            </text>

                            <!-- Arrow to Compiler -->
                            <path d="M150 110 L190 110" stroke="#64748b" stroke-width="2" fill="none" />
                            <polygon points="195,110 185,105 185,115" fill="#64748b" />

                            <!-- Compiler Box -->
                            <rect
                                x="200"
                                y="75"
                                width="100"
                                height="70"
                                rx="10"
                                fill="#0ea5e9"
                                stroke="#0284c7"
                                stroke-width="2"
                            />
                            <text
                                x="250"
                                y="105"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="12"
                                fill="white"
                                font-weight="600"
                            >
                                コンパイラ
                            </text>
                            <text
                                x="250"
                                y="125"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="9"
                                fill="#bae6fd"
                            >
                                構文チェック・変換
                            </text>

                            <!-- Success Path (Top) -->
                            <!-- Arrow up and right -->
                            <path d="M300 95 L330 95 L330 45 L360 45" stroke="#22c55e" stroke-width="2" fill="none" />
                            <polygon points="365,45 355,40 355,50" fill="#22c55e" />

                            <!-- Success Label -->
                            <text
                                x="345"
                                y="70"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="10"
                                fill="#22c55e"
                                font-weight="600"
                            >
                                成功
                            </text>

                            <!-- Binary Code Box (Success) -->
                            <rect
                                x="370"
                                y="15"
                                width="140"
                                height="60"
                                rx="10"
                                fill="#1e293b"
                                stroke="#22c55e"
                                stroke-width="2"
                            />
                            <text
                                x="440"
                                y="40"
                                text-anchor="middle"
                                font-family="JetBrains Mono"
                                font-size="11"
                                fill="#4ade80"
                            >
                                00110101...
                            </text>
                            <text
                                x="440"
                                y="60"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="10"
                                fill="#94a3b8"
                            >
                                実行可能なコード
                            </text>

                            <!-- Check mark icon -->
                            <circle cx="530" cy="45" r="15" fill="#dcfce7" stroke="#22c55e" stroke-width="2" />
                            <path d="M523 45 L528 50 L538 40" stroke="#22c55e" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round" />

                            <!-- Error Path (Bottom) -->
                            <!-- Arrow down and right -->
                            <path d="M300 125 L330 125 L330 175 L360 175" stroke="#ef4444" stroke-width="2" fill="none" />
                            <polygon points="365,175 355,170 355,180" fill="#ef4444" />

                            <!-- Error Label -->
                            <text
                                x="345"
                                y="155"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="10"
                                fill="#ef4444"
                                font-weight="600"
                            >
                                失敗
                            </text>

                            <!-- Error Message Box -->
                            <rect
                                x="370"
                                y="145"
                                width="180"
                                height="60"
                                rx="10"
                                fill="#fef2f2"
                                stroke="#ef4444"
                                stroke-width="2"
                            />
                            <text
                                x="460"
                                y="168"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="11"
                                fill="#dc2626"
                                font-weight="600"
                            >
                                コンパイルエラー
                            </text>
                            <text
                                x="460"
                                y="188"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="9"
                                fill="#f87171"
                            >
                                エラーメッセージが表示される
                            </text>

                            <!-- X mark icon -->
                            <circle cx="530" cy="175" r="15" fill="#fef2f2" stroke="#ef4444" stroke-width="2" />
                            <path d="M524 169 L536 181 M536 169 L524 181" stroke="#ef4444" stroke-width="2.5" fill="none" stroke-linecap="round" />
                        </svg>
                        <p class="diagram-caption">図2.1 コンパイルの流れ（成功時とエラー時）</p>
                    </div>

                    <p>
                        しかし、プログラムのコードに間違いや不足があると、コンパイルの過程でエラーメッセージが表示されることがあります。このようなエラーを「コンパイルエラー」と呼びます。コンパイルエラーの例と対処方法を以下に示します。
                    </p>

                    <ul class="feature-list">
                        <li>
                            <span class="icon"
                                ><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path
                                        d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                                    /></svg
                            ></span>
                            <span>変数を使用する前に、変数を宣言していない</span>
                        </li>
                        <li>
                            <span class="icon"
                                ><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path
                                        d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                                    /></svg
                            ></span>
                            <span>使用していないライブラリやモジュールを参照している</span>
                        </li>
                        <li>
                            <span class="icon"
                                ><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path
                                        d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                                    /></svg
                            ></span>
                            <span>括弧「()」「{}」やセミコロン「;」の不足や誤用</span>
                        </li>
                    </ul>

                    <div class="highlight-box warning">
                        <p>
                            <strong>🔧 コンパイルエラーにどう対処するか？</strong
                            ><br />コンパイルエラーは、「エラーメッセージ」をよく読むことで原因を特定できます。エラーメッセージには、どの行やどの部分で問題が発生しているのかが示されていることが多いです。そのヒントを元に、コードの該当箇所を修正することで、エラーを解消できます。<br /><br />コンパイルエラーは、プログラミング初心者にとっては難しく感じるかもしれませんが、エラーメッセージをしっかり読み、調査し、何が問題なのかを理解することで、スキルアップに繋がります。エラーは怖がらず、解決する過程を名探偵のように調査してください。
                        </p>
                    </div>
                </div>

                <!-- 2-1-3 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-1-3</span>
                        <h3>依存性とは？</h3>
                    </div>

                    <p>
                        依存とは、あるものが他のものに頼っている、またはあるものが他のものなしでは存在や機能できない状態を指します。私達は日常生活の中で、電気や水道などのサービスに「依存」して生活しています。
                    </p>

                    <p>
                        プログラムを書くときに、「依存性」という言葉を聞いたことがありますでしょうか？あるクラスやモジュールが、他のクラスやモジュールの機能や振る舞いに頼っていることを「依存性」といいます。
                    </p>

                    <div class="highlight-box">
                        <p>
                            <strong>📝 モジュールとは</strong
                            ><br />モジュールとは、独立した機能や役割を持つソフトウェアの一部分を指します。大きなソフトウェアやプログラムを構成する小さな「部品」のようなものとイメージしてください。
                        </p>
                    </div>

                    <h4 style="margin: 2rem 0 1rem; font-weight: 600">■ 「使う側」と「使われる側」</h4>
                    <p>まずプログラムには「使う側」と「使われる側」という関係があります。</p>

                    <div class="diagram">
                        <svg width="520" height="180" viewBox="0 0 520 180">
                            <!-- Class A Box (使う側) -->
                            <rect
                                x="30"
                                y="40"
                                width="160"
                                height="100"
                                rx="8"
                                fill="#ffffff"
                                stroke="#0ea5e9"
                                stroke-width="2"
                            />
                            <!-- Class A Header -->
                            <rect
                                x="30"
                                y="40"
                                width="160"
                                height="30"
                                rx="8"
                                fill="#0ea5e9"
                            />
                            <rect
                                x="30"
                                y="55"
                                width="160"
                                height="15"
                                fill="#0ea5e9"
                            />
                            <text
                                x="110"
                                y="60"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="12"
                                fill="white"
                                font-weight="600"
                            >
                                使う側
                            </text>
                            <!-- Class A Content -->
                            <text
                                x="110"
                                y="95"
                                text-anchor="middle"
                                font-family="JetBrains Mono"
                                font-size="10"
                                fill="#64748b"
                            >
                                B b = new B();
                            </text>
                            <text
                                x="110"
                                y="115"
                                text-anchor="middle"
                                font-family="JetBrains Mono"
                                font-size="10"
                                fill="#64748b"
                            >
                                b.methodX();
                            </text>

                            <!-- Arrow with labels -->
                            <defs>
                                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
                                </marker>
                            </defs>

                            <!-- new Arrow -->
                            <path d="M200 80 L310 80" stroke="#22c55e" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
                            <text
                                x="255"
                                y="70"
                                text-anchor="middle"
                                font-family="JetBrains Mono"
                                font-size="10"
                                fill="#22c55e"
                                font-weight="600"
                            >
                                new
                            </text>

                            <!-- method call Arrow -->
                            <path d="M200 110 L310 110" stroke="#f97316" stroke-width="2" fill="none" marker-end="url(#arrowhead)" />
                            <text
                                x="255"
                                y="130"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="10"
                                fill="#f97316"
                                font-weight="600"
                            >
                                機能を呼び出す
                            </text>

                            <!-- Class B Box (使われる側) -->
                            <rect
                                x="320"
                                y="40"
                                width="170"
                                height="100"
                                rx="8"
                                fill="#ffffff"
                                stroke="#f97316"
                                stroke-width="2"
                            />
                            <!-- Class B Header -->
                            <rect
                                x="320"
                                y="40"
                                width="170"
                                height="30"
                                rx="8"
                                fill="#f97316"
                            />
                            <rect
                                x="320"
                                y="55"
                                width="170"
                                height="15"
                                fill="#f97316"
                            />
                            <text
                                x="405"
                                y="60"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="12"
                                fill="white"
                                font-weight="600"
                            >
                                使われる側
                            </text>
                            <!-- Class B Content -->
                            <text
                                x="405"
                                y="95"
                                text-anchor="middle"
                                font-family="JetBrains Mono"
                                font-size="10"
                                fill="#64748b"
                            >
                                void methodX() {
                            </text>
                            <text
                                x="405"
                                y="115"
                                text-anchor="middle"
                                font-family="JetBrains Mono"
                                font-size="10"
                                fill="#64748b"
                            >
                                    // 処理
                            </text>
                            <text
                                x="405"
                                y="130"
                                text-anchor="middle"
                                font-family="JetBrains Mono"
                                font-size="10"
                                fill="#64748b"
                            >
                                }
                            </text>

                            <!-- Dependency Label -->
                            <text
                                x="260"
                                y="165"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="11"
                                fill="#94a3b8"
                            >
                                「使う側」は「使われる側」に依存している
                            </text>
                        </svg>
                        <p class="diagram-caption">図2.2 「使う側」と「使われる側」</p>
                    </div>

                    <p>
                        使いたい機能を呼び出すには「使う側」クラスで「使われる側」クラスに対し「new」キーワードを使用してインスタンスを生成し参照を取得後、目的の機能を利用します。
                    </p>

                    <h4 style="margin: 2rem 0 1rem; font-weight: 600">■ クラス依存（実装依存）</h4>
                    <p>
                        まずはクラス依存から説明します。「使う側」クラスAで「使われる側」クラスBのメソッド「methodX」を呼んでみましょう。
                    </p>

                     <div style="margin: 1.5rem 0;">
                        <div style="display: grid; gap: 1rem;">
                            <div style="background: #f0f9ff; border-left: 4px solid #0ea5e9; padding: 1rem; border-radius: 0 8px 8px 0;">
                                <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #0284c7;">1. 前提条件</p>
                                <ul style="margin: 0; padding-left: 1.5rem; color: #475569; font-size: 0.95em;">
                                    <li>「使う側」クラスAが、「使われる側」クラスBを<strong>直接参照</strong>している</li>
                                    <li>クラスAのコード内で <code style="background: #e0f2fe; padding: 2px 6px; border-radius: 4px;">B b = new B();</code> のようにクラスBの型を明示的に記述</li>
                                </ul>
                            </div>

                            <div style="background: #fefce8; border-left: 4px solid #eab308; padding: 1rem; border-radius: 0 8px 8px 0;">
                                <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #a16207;">2. 変更要件</p>
                                <ul style="margin: 0; padding-left: 1.5rem; color: #475569; font-size: 0.95em;">
                                    <li>仕様変更により、「使われる側」をクラスBから<strong>別の実装</strong>クラスCに差し替えることになった</li>
                                    <li>クラスCはクラスBと<strong>同じメソッド</strong> <code style="background: #fef9c3; padding: 2px 6px; border-radius: 4px;">methodX()</code> を持っている（実装内容が異なる）</li>
                                </ul>
                            </div>

                            <div style="background: #fef2f2; border-left: 4px solid #ef4444; padding: 1rem; border-radius: 0 8px 8px 0;">
                                <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #dc2626;">3. 問題点</p>
                                <ul style="margin: 0; padding-left: 1.5rem; color: #475569; font-size: 0.95em;">
                                    <li>同じ機能を持つクラスに差し替えるだけなのに、「使う側」クラスAのコードも<strong>書き換えが必要</strong>になる</li>
                                    <li><code style="background: #fee2e2; padding: 2px 6px; border-radius: 4px;">B b = new B();</code> → <code style="background: #dcfce7; padding: 2px 6px; border-radius: 4px;">C c = new C();</code>（型とnewの部分を変更）</li>
                                    <li>利用箇所が多いほど修正量が増え、ミスや修正漏れのリスクが高まる</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="diagram">
                        <svg width="600" height="320" viewBox="0 0 600 320">
                            <!-- Before Section Background -->
                            <rect x="20" y="10" width="560" height="120" rx="10" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1" />
                            <text x="40" y="35" font-family="Noto Sans JP" font-size="11" fill="#64748b" font-weight="600">【変更前】クラスAからクラスBを利用</text>

                            <!-- Class A (Before) -->
                            <rect x="40" y="50" width="150" height="70" rx="8" fill="white" stroke="#0ea5e9" stroke-width="2" />
                            <rect x="40" y="50" width="150" height="24" rx="8" fill="#0ea5e9" />
                            <rect x="40" y="66" width="150" height="8" fill="#0ea5e9" />
                            <text x="115" y="67" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="white" font-weight="600">クラス A（使う側）</text>
                            <text x="55" y="90" font-family="JetBrains Mono" font-size="9" fill="#0284c7">B b = new B();</text>
                            <text x="55" y="105" font-family="JetBrains Mono" font-size="9" fill="#0284c7">b.methodX();</text>

                            <!-- Arrow -->
                            <defs>
                                <marker id="arrowGray" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
                                </marker>
                            </defs>
                            <path d="M200 85 L280 85" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowGray)" />
                            <text x="240" y="78" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#64748b">依存</text>

                            <!-- Class B -->
                            <rect x="290" y="50" width="130" height="70" rx="8" fill="white" stroke="#f97316" stroke-width="2" />
                            <rect x="290" y="50" width="130" height="24" rx="8" fill="#f97316" />
                            <rect x="290" y="66" width="130" height="8" fill="#f97316" />
                            <text x="355" y="67" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="white" font-weight="600">クラス B</text>
                            <text x="305" y="90" font-family="JetBrains Mono" font-size="9" fill="#c2410c">methodX() {</text>
                            <text x="315" y="105" font-family="JetBrains Mono" font-size="9" fill="#94a3b8">...</text>

                            <!-- Divider with arrow -->
                            <line x1="20" y1="145" x2="580" y2="145" stroke="#fecaca" stroke-width="2" stroke-dasharray="6,4" />
                            <text x="300" y="160" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#ef4444" font-weight="600">↓ 仕様変更：クラスBをクラスCに変更 ↓</text>

                            <!-- After Section Background -->
                            <rect x="20" y="175" width="560" height="135" rx="10" fill="#fef2f2" stroke="#fecaca" stroke-width="2" />
                            <text x="40" y="200" font-family="Noto Sans JP" font-size="11" fill="#dc2626" font-weight="600">【変更後】クラスAも書き換えが必要！</text>

                            <!-- Class A (After) - Modified -->
                            <rect x="40" y="215" width="150" height="85" rx="8" fill="white" stroke="#ef4444" stroke-width="2" />
                            <rect x="40" y="215" width="150" height="24" rx="8" fill="#0ea5e9" />
                            <rect x="40" y="231" width="150" height="8" fill="#0ea5e9" />
                            <text x="115" y="232" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="white" font-weight="600">クラス A（使う側）</text>

                            <!-- Strikethrough old code -->
                            <text x="55" y="255" font-family="JetBrains Mono" font-size="9" fill="#94a3b8" text-decoration="line-through">B b = new B();</text>
                            <text x="55" y="270" font-family="JetBrains Mono" font-size="9" fill="#ef4444" font-weight="500">C c = new C();</text>
                            <text x="55" y="285" font-family="JetBrains Mono" font-size="9" fill="#ef4444" font-weight="500">c.methodX();</text>

                            <!-- Modification indicator -->
                            <rect x="45" y="260" width="95" height="15" rx="4" fill="none" stroke="#ef4444" stroke-width="1.5" stroke-dasharray="3,2" />
                            <text x="200" y="272" font-family="Noto Sans JP" font-size="8" fill="#ef4444">← 書き換え</text>

                            <!-- Arrow to C -->
                            <path d="M200 260 L280 260" stroke="#22c55e" stroke-width="2" fill="none" marker-end="url(#arrowGray)" />
                            <text x="240" y="253" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#22c55e">新しい依存</text>

                            <!-- Class C (New) -->
                            <rect x="290" y="215" width="130" height="70" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="2" />
                            <rect x="290" y="215" width="130" height="24" rx="8" fill="#22c55e" />
                            <rect x="290" y="231" width="130" height="8" fill="#22c55e" />
                            <text x="355" y="232" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="white" font-weight="600">クラス C（別実装）</text>
                            <text x="305" y="255" font-family="JetBrains Mono" font-size="9" fill="#16a34a">methodX() {</text>
                            <text x="315" y="270" font-family="JetBrains Mono" font-size="9" fill="#94a3b8">// 別の実装</text>

                            <!-- Problem indicator -->
                            <rect x="440" y="220" width="130" height="75" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5" />
                            <text x="505" y="242" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#b45309" font-weight="600">問題点</text>
                            <text x="505" y="260" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#92400e">クラスを直接参照</text>
                            <text x="505" y="273" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#92400e">しているため</text>
                            <text x="505" y="286" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#92400e">修正が連鎖する</text>
                        </svg>
                        <p class="diagram-caption">図2.3 クラス依存（実装依存）の流れ</p>
                    </div>

                   

                    <div class="sample-code-header">
                        <h4>■ サンプルソースコード</h4>
                        <a href="downloads/chapter2-samples.zip" class="download-btn" download>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                            サンプルをダウンロード
                        </a>
                    </div>

                    <div class="sample-code-grid">
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-dot red"></span>
                                <span class="code-dot yellow"></span>
                                <span class="code-dot green"></span>
                                <span class="code-title">B.java - 使われる側（変更前）</span>
                            </div>
                            <div class="code-content">
                                <pre><span class="code-comment">// クラス B（使われる側）</span>
<span class="code-keyword">public class</span> <span class="code-class">B</span> {
    <span class="code-keyword">public void</span> <span class="code-method">methodX</span>() {
        System.out.println(<span class="code-string">"Bの処理"</span>);
    }
}</pre>
                            </div>
                        </div>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-dot red"></span>
                                <span class="code-dot yellow"></span>
                                <span class="code-dot green"></span>
                                <span class="code-title">C.java - 使われる側（変更後）</span>
                            </div>
                            <div class="code-content">
                                <pre><span class="code-comment">// クラス C（別の実装）</span>
<span class="code-keyword">public class</span> <span class="code-class">C</span> {
    <span class="code-keyword">public void</span> <span class="code-method">methodX</span>() {
        System.out.println(<span class="code-string">"Cの処理"</span>);
    }
}</pre>
                            </div>
                        </div>
                    </div>

                    <div class="sample-code-grid">
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-dot red"></span>
                                <span class="code-dot yellow"></span>
                                <span class="code-dot green"></span>
                                <span class="code-title">A.java - 変更前</span>
                            </div>
                            <div class="code-content">
                                <pre><span class="code-comment">// クラス A（使う側）- 変更前</span>
<span class="code-keyword">public class</span> <span class="code-class">A</span> {
    <span class="code-keyword">public void</span> <span class="code-method">xxx</span>() {
        <span class="code-class">B</span> b = <span class="code-keyword">new</span> <span class="code-class">B</span>();
        b.methodX();
    }
}</pre>
                            </div>
                        </div>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-dot red"></span>
                                <span class="code-dot yellow"></span>
                                <span class="code-dot green"></span>
                                <span class="code-title">A.java - 変更後</span>
                            </div>
                            <div class="code-content">
                                <pre><span class="code-comment">// クラス A（使う側）- 変更後</span>
<span class="code-keyword">public class</span> <span class="code-class">A</span> {
    <span class="code-keyword">public void</span> <span class="code-method">xxx</span>() {
        <span class="code-class">C</span> c = <span class="code-keyword">new</span> <span class="code-class">C</span>();  <span class="code-comment">// ← 型も変更</span>
        c.methodX();       <span class="code-comment">// ← 変数名も変更</span>
    }
}</pre>
                            </div>
                        </div>
                    </div>

                    <div style="background: #fef2f2; border: 1px solid #fecaca; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                        <p style="margin: 0; color: #991b1b; font-size: 0.95em;">
                            <strong>問題点：</strong>クラスBからクラスCに差し替える場合、クラスAのコードで <code style="background: #fee2e2; padding: 2px 6px; border-radius: 4px;">B b = new B()</code> → <code style="background: #fee2e2; padding: 2px 6px; border-radius: 4px;">C c = new C()</code> と<strong>2箇所（型と変数名）</strong>の変更が必要です。利用箇所が多いほど修正量が膨大になります。
                        </p>
                    </div>

                    <p>
                        依存は「クラス依存（実装依存）」、「インターフェース依存」の2種類に分けることができます。
                    </p>

                    <div class="highlight-box warning">
                        <p>
                            <strong>⚠️ クラス依存の問題点</strong
                            ><br />「使う側」クラスで「使われる側」クラスの型を直接記述してしまうと「使われる側」クラスを変更する場合、利用している箇所をすべて修正しなければなりません。修正箇所が増えればミスや修正漏れのリスクが高くなります。もし修正箇所が数10箇所、数100箇所存在した場合、修正作業と修正による動作確認に掛かる時間は膨大になってしまいます。修正箇所が多いことを「依存性が高い」といいます。
                        </p>
                    </div>

                    <h4 style="margin: 2rem 0 1rem; font-weight: 600">■ インターフェース依存</h4>
                    <p>
                        次にインターフェース依存について説明します。インターフェースIがあり、それを実装した「使われる側」クラスBがあります。「使う側」クラスAで、「使われる側」クラスBのメソッド「methodX」を呼んでみましょう。
                    </p>

                    <p>注意点は「使う側」クラスAではインターフェースを型として利用することです！</p>

                

                    <div style="margin: 1.5rem 0;">
                        <div style="display: grid; gap: 1rem;">
                            <div style="background: #f0f9ff; border-left: 4px solid #0ea5e9; padding: 1rem; border-radius: 0 8px 8px 0;">
                                <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #0284c7;">1. 前提条件</p>
                                <ul style="margin: 0; padding-left: 1.5rem; color: #475569; font-size: 0.95em;">
                                    <li>「使う側」クラスAは、<strong>インターフェースI</strong>を型として参照している</li>
                                    <li>クラスAのコード内で <code style="background: #e0f2fe; padding: 2px 6px; border-radius: 4px;">I i = new B();</code> のようにインターフェースを型として記述</li>
                                    <li>クラスBとクラスCは、どちらもインターフェースIを実装（implements）している</li>
                                </ul>
                            </div>

                            <div style="background: #fefce8; border-left: 4px solid #eab308; padding: 1rem; border-radius: 0 8px 8px 0;">
                                <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #a16207;">2. 変更要件</p>
                                <ul style="margin: 0; padding-left: 1.5rem; color: #475569; font-size: 0.95em;">
                                    <li>仕様変更により、「使われる側」をクラスBからクラスCに差し替えることになった</li>
                                    <li>クラスCもインターフェースIを実装しているため、同じ <code style="background: #fef9c3; padding: 2px 6px; border-radius: 4px;">methodX()</code> を持っている</li>
                                </ul>
                            </div>

                            <div style="background: #f0fdf4; border-left: 4px solid #22c55e; padding: 1rem; border-radius: 0 8px 8px 0;">
                                <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #16a34a;">3. メリット（クラス依存との違い）</p>
                                <ul style="margin: 0; padding-left: 1.5rem; color: #475569; font-size: 0.95em;">
                                    <li><strong>修正は1箇所のみ：</strong><code style="background: #fee2e2; padding: 2px 6px; border-radius: 4px;">new B()</code> → <code style="background: #dcfce7; padding: 2px 6px; border-radius: 4px;">new C()</code></li>
                                    <li>変数の型（I）は変更不要 → <code style="background: #e0f2fe; padding: 2px 6px; border-radius: 4px;">I i = ...</code> のまま</li>
                                    <li>メソッド呼び出しも変更不要 → <code style="background: #e0f2fe; padding: 2px 6px; border-radius: 4px;">i.methodX()</code> のまま</li>
                                </ul>
                            </div>
                        </div>
                    </div>



                    <div class="diagram">
                        <svg width="680" height="200" viewBox="0 0 680 200">
                            <!-- Class A -->
                            <rect
                                x="20"
                                y="60"
                                width="140"
                                height="90"
                                rx="8"
                                fill="#ffffff"
                                stroke="#0ea5e9"
                                stroke-width="2"
                            />
                            <rect x="20" y="60" width="140" height="28" rx="8" fill="#0ea5e9" />
                            <text
                                x="90"
                                y="80"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="11"
                                fill="white"
                                font-weight="600"
                            >
                                クラス A
                            </text>
                            <text x="32" y="105" font-family="JetBrains Mono" font-size="9" fill="#475569">
                                xxx() {
                            </text>
                            <text x="42" y="120" font-family="JetBrains Mono" font-size="9" fill="#0ea5e9">
                                I i = new B();
                            </text>
                            <text x="42" y="135" font-family="JetBrains Mono" font-size="9" fill="#475569">
                                i.methodX();
                            </text>
                            <text x="32" y="150" font-family="JetBrains Mono" font-size="9" fill="#475569">}</text>

                            <!-- Interface I -->
                            <rect
                                x="220"
                                y="60"
                                width="140"
                                height="70"
                                rx="8"
                                fill="#ffffff"
                                stroke="#10b981"
                                stroke-width="2"
                                stroke-dasharray="5,3"
                            />
                            <rect x="220" y="60" width="140" height="28" rx="8" fill="#10b981" />
                            <text
                                x="290"
                                y="80"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="11"
                                fill="white"
                                font-weight="600"
                            >
                                インターフェース I
                            </text>
                            <text x="235" y="105" font-family="JetBrains Mono" font-size="9" fill="#475569">
                                methodX();
                            </text>

                            <!-- Arrow to Interface -->
                            <path d="M170 105 L210 105" stroke="#64748b" stroke-width="2" />
                            <polygon points="215,105 205,100 205,110" fill="#64748b" />

                            <!-- Class B -->
                            <rect
                                x="420"
                                y="20"
                                width="140"
                                height="70"
                                rx="8"
                                fill="#ffffff"
                                stroke="#f97316"
                                stroke-width="2"
                            />
                            <rect x="420" y="20" width="140" height="28" rx="8" fill="#f97316" />
                            <text
                                x="490"
                                y="40"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="11"
                                fill="white"
                                font-weight="600"
                            >
                                クラス B
                            </text>
                            <text x="432" y="65" font-family="JetBrains Mono" font-size="9" fill="#475569">
                                methodX() {...}
                            </text>
                            <text x="565" y="55" font-family="Noto Sans JP" font-size="9" fill="#64748b">
                                implements I
                            </text>

                            <!-- Class C -->
                            <rect
                                x="420"
                                y="110"
                                width="140"
                                height="70"
                                rx="8"
                                fill="#ffffff"
                                stroke="#8b5cf6"
                                stroke-width="2"
                            />
                            <rect x="420" y="110" width="140" height="28" rx="8" fill="#8b5cf6" />
                            <text
                                x="490"
                                y="130"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="11"
                                fill="white"
                                font-weight="600"
                            >
                                クラス C
                            </text>
                            <text x="432" y="155" font-family="JetBrains Mono" font-size="9" fill="#475569">
                                methodX() {...}
                            </text>
                            <text x="565" y="145" font-family="Noto Sans JP" font-size="9" fill="#64748b">
                                implements I
                            </text>

                            <!-- Arrows from Interface to Classes -->
                            <path d="M370 85 L410 55" stroke="#10b981" stroke-width="2" />
                            <polygon points="415,52 404,52 408,62" fill="#10b981" />
                            <path d="M370 105 L410 135" stroke="#10b981" stroke-width="2" />
                            <polygon points="415,138 404,128 408,138" fill="#10b981" />

                            <text x="380" y="50" font-family="Noto Sans JP" font-size="8" fill="#64748b">実装</text>
                            <text x="380" y="155" font-family="Noto Sans JP" font-size="8" fill="#64748b">実装</text>
                        </svg>
                        <p class="diagram-caption">
                            図2.6 インターフェース依存「インスタンスの生成」と「メソッドの呼び出し」
                        </p>
                    </div>
                <div class="highlight-box">
                        <p>
                            <strong>📝 インターフェースも型として使えるのか？</strong><br>
                            はい、Javaではインターフェースを<strong>変数の型</strong>として使用できます。
                        </p>
                        <div style="background: #f8fafc; border-radius: 6px; padding: 1rem; margin-top: 0.75rem;">
                            <p style="margin: 0 0 0.5rem 0; font-size: 0.95em; color: #475569;"><strong>なぜ可能なのか？</strong></p>
                            <ul style="margin: 0; padding-left: 1.5rem; color: #64748b; font-size: 0.9em;">
                                <li>インターフェースを実装（implements）したクラスは、そのインターフェースの「一種」とみなされる</li>
                                <li>クラスBが <code style="background: #e0f2fe; padding: 2px 4px; border-radius: 3px;">implements I</code> している場合、「BはIである」と言える</li>
                                <li>そのため <code style="background: #e0f2fe; padding: 2px 4px; border-radius: 3px;">I i = new B();</code> のように、インターフェース型の変数に実装クラスのインスタンスを代入できる</li>
                            </ul>
                        </div>
                        <p style="margin: 0.75rem 0 0 0; font-size: 0.9em; color: #64748b;">
                            これは「ポリモーフィズム（多態性）」と呼ばれるオブジェクト指向の重要な特徴です。同じインターフェースを実装していれば、実際のクラスが異なっていても同じ型として扱えます。
                        </p>
                    </div>
                    

                    <div class="sample-code-header">
                        <h4>■ サンプルソースコード</h4>
                        <a href="downloads/chapter2-samples.zip" class="download-btn" download>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                            サンプルをダウンロード
                        </a>
                    </div>

                    <div class="sample-code-grid">
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-dot red"></span>
                                <span class="code-dot yellow"></span>
                                <span class="code-dot green"></span>
                                <span class="code-title">I.java - インターフェース</span>
                            </div>
                            <div class="code-content">
                                <pre><span class="code-comment">// インターフェース I</span>
<span class="code-keyword">public interface</span> <span class="code-class">I</span> {
    <span class="code-keyword">void</span> <span class="code-method">methodX</span>();
}</pre>
                            </div>
                        </div>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-dot red"></span>
                                <span class="code-dot yellow"></span>
                                <span class="code-dot green"></span>
                                <span class="code-title">B.java - 実装クラス</span>
                            </div>
                            <div class="code-content">
                                <pre><span class="code-comment">// クラス B（インターフェース I を実装）</span>
<span class="code-keyword">public class</span> <span class="code-class">B</span> <span class="code-keyword">implements</span> <span class="code-class">I</span> {
    <span class="code-annotation">@Override</span>
    <span class="code-keyword">public void</span> <span class="code-method">methodX</span>() {
        System.out.println(<span class="code-string">"Bの処理"</span>);
    }
}</pre>
                            </div>
                        </div>
                    </div>

                    <div class="sample-code-grid">
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-dot red"></span>
                                <span class="code-dot yellow"></span>
                                <span class="code-dot green"></span>
                                <span class="code-title">C.java - 別の実装クラス</span>
                            </div>
                            <div class="code-content">
                                <pre><span class="code-comment">// クラス C（インターフェース I を実装）</span>
<span class="code-keyword">public class</span> <span class="code-class">C</span> <span class="code-keyword">implements</span> <span class="code-class">I</span> {
    <span class="code-annotation">@Override</span>
    <span class="code-keyword">public void</span> <span class="code-method">methodX</span>() {
        System.out.println(<span class="code-string">"Cの処理"</span>);
    }
}</pre>
                            </div>
                        </div>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-dot red"></span>
                                <span class="code-dot yellow"></span>
                                <span class="code-dot green"></span>
                                <span class="code-title">A.java - 使う側クラス</span>
                            </div>
                            <div class="code-content">
                                <pre><span class="code-comment">// クラス A（使う側）</span>
<span class="code-keyword">public class</span> <span class="code-class">A</span> {
    <span class="code-keyword">public void</span> <span class="code-method">xxx</span>() {
        <span class="code-comment">// インターフェースを型として宣言</span>
        <span class="code-class">I</span> i = <span class="code-keyword">new</span> <span class="code-class">B</span>();  <span class="code-comment">// ← ここだけ変更</span>
        i.methodX();
    }
}</pre>
                            </div>
                        </div>
                    </div>

                    <div style="background: #ecfdf5; border: 1px solid #a7f3d0; border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                        <p style="margin: 0; color: #065f46; font-size: 0.95em;">
                            <strong>変更時のポイント：</strong>クラスBからクラスCに差し替える場合、<code style="background: #d1fae5; padding: 2px 6px; border-radius: 4px;">new B()</code> を <code style="background: #d1fae5; padding: 2px 6px; border-radius: 4px;">new C()</code> に変更するだけで済みます。変数の型 <code>I</code> とメソッド呼び出し <code>i.methodX()</code> は変更不要です。
                        </p>
                    </div>

                    <p>
                        <strong>1箇所の修正で済みました。</strong
                        >このように、インターフェースを実装した「使われる側」クラスを変更する場合、以下のようなメリットがあります。
                    </p>

                    <ul class="feature-list">
                        <li>
                            <span class="icon"
                                ><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 13l4 4L19 7" /></svg
                            ></span>
                            <span
                                >インターフェースは参照を受け取る型として利用できるため、変数の型名を変更しなくて良い</span
                            >
                        </li>
                        <li>
                            <span class="icon"
                                ><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 13l4 4L19 7" /></svg
                            ></span>
                            <span
                                >インターフェース宣言されたメソッドを利用すれば、クラスが変わってもメソッド名の変更が不要</span
                            >
                        </li>
                    </ul>

                    <div class="highlight-box success">
                        <p>
                            <strong>✅ インターフェース依存のメリット</strong
                            ><br />このメリットから「クラス依存」より「インターフェース依存」を使用することで修正箇所を減らすことが可能です。修正箇所が少ないことを「依存性が低い」といいます。
                        </p>
                    </div>
                </div>

                <!-- 2-1-4 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-1-4</span>
                        <h3>インターフェース依存のプログラム作成</h3>
                    </div>

                    <p>
                        「計算処理」の役割を持つインターフェース、インターフェースを実装した「加算」と「減算」の処理を持つクラスを各々作成し、インターフェース依存の動きを確認してみましょう。
                    </p>

                    <div style="margin: 1rem 0;">
                        <a href="downloads/chapter2-1-4-calculator.zip" class="download-btn" download>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                            サンプルをダウンロード
                        </a>
                    </div>

                    <div class="info-box" style="margin: 1.5rem 0;">
                        <p><strong>VSCodeでプロジェクトルートを spring_lesson とした場合のフォルダ構成：</strong></p>
                        <ul style="margin: 0.5rem 0 0 1.5rem;">
                            <li><code>lesson214</code> フォルダを作成</li>
                            <li>その中に <code>used</code> フォルダと <code>use</code> フォルダを作成</li>
                            <li><code>used</code> パッケージ：インターフェースと実装クラス（提供側）</li>
                            <li><code>use</code> パッケージ：呼び出し側（Callクラス）</li>
                        </ul>
                        <pre style="margin-top: 0.8rem; background: #f5f5f5; padding: 0.8rem; border-radius: 4px; font-size: 0.9em;">spring_lesson/
└── lesson214/
    ├── used/               （提供側パッケージ）
    │   ├── Calculator.java  ← インターフェース
    │   ├── AddCalc.java     ← 実装クラス（加算）
    │   └── SubCalc.java     ← 実装クラス（減算）
    └── use/                （呼び出し側パッケージ）
        └── Call.java        ← mainメソッドを持つクラス</pre>
                    </div>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ インターフェースの作成（usedパッケージ）</h4>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">Calculator.java - インターフェース</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> used;

<span class="code-comment">/**
 * 計算処理
 */</span>
<span class="code-keyword">public interface</span> <span class="code-type">Calculator</span> {
    <span class="code-comment">/**
     * 計算処理を実行する
     * @param x
     * @param y
     * @return 計算結果
     */</span>
    <span class="code-type">Integer</span> calc(<span class="code-type">Integer</span> x, <span class="code-type">Integer</span> y);
}</pre>
                        </div>
                    </div>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ 実装クラスの作成（usedパッケージ）</h4>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">AddCalc.java - 加算の実装</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> used;

<span class="code-comment">/**
 * Calculator実装クラス
 * 加算を行う
 */</span>
<span class="code-keyword">public class</span> <span class="code-type">AddCalc</span> <span class="code-keyword">implements</span> <span class="code-type">Calculator</span> {
    <span class="code-annotation">@Override</span>
    <span class="code-keyword">public</span> <span class="code-type">Integer</span> calc(<span class="code-type">Integer</span> x, <span class="code-type">Integer</span> y) {
        <span class="code-keyword">return</span> x + y;
    }
}</pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">SubCalc.java - 減算の実装</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> used;

<span class="code-comment">/**
 * Calculator実装クラス
 * 減算を行う
 */</span>
<span class="code-keyword">public class</span> <span class="code-type">SubCalc</span> <span class="code-keyword">implements</span> <span class="code-type">Calculator</span> {
    <span class="code-annotation">@Override</span>
    <span class="code-keyword">public</span> <span class="code-type">Integer</span> calc(<span class="code-type">Integer</span> x, <span class="code-type">Integer</span> y) {
        <span class="code-keyword">return</span> x - y;
    }
}</pre>
                        </div>
                    </div>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ 呼び出し側クラスの作成（useパッケージ）</h4>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">Call.java - 呼び出し側（mainクラス）</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> use;

<span class="code-keyword">import</span> used.AddCalc;
<span class="code-keyword">import</span> used.Calculator;

<span class="code-comment">/**
 * インターフェース依存を確認するためのクラス
 */</span>
<span class="code-keyword">public class</span> <span class="code-type">Call</span> {
    <span class="code-keyword">public static void</span> main(<span class="code-type">String</span>[] args) {
        <span class="code-comment">// 加算クラスをインスタンス化</span>
        <span class="code-type">Calculator</span> calculator = <span class="code-keyword">new</span> <span class="code-type">AddCalc</span>();
        <span class="code-comment">// メソッドを実行</span>
        <span class="code-type">Integer</span> result = calculator.calc(<span class="number">10</span>, <span class="number">5</span>);
        <span class="code-comment">// 結果の表示</span>
        System.out.println(<span class="code-string">"計算結果は「"</span> + result + <span class="code-string">"」です。"</span>);
    }
}</pre>
                        </div>
                    </div>

                    <p>
                        実行結果:
                        <code
                            style="
                                background: #f1f5f9;
                                padding: 0.25rem 0.5rem;
                                border-radius: 4px;
                                font-family: &quot;JetBrains Mono&quot;, monospace;
                            "
                            >計算結果は「15」です。</code
                        >
                    </p>

                    <p>
                        実装クラスをAddCalcからSubCalcに変更してみましょう。Callクラス内でインスタンス化している「AddCalc」を「SubCalc」に書き換えます。
                    </p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">Call.java - 修正後</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-comment">// 減算クラスをインスタンス化</span>
<span class="code-type">Calculator</span> calculator = <span class="code-keyword">new</span> <span class="code-type">SubCalc</span>();</pre>
                        </div>
                    </div>

                    <p>
                        再度実行すると、「SubCalc」の「calc」メソッド（減算）が実行され、コンソールに計算結果が表示されます。
                    </p>

                    <p>
                        実行結果:
                        <code
                            style="
                                background: #f1f5f9;
                                padding: 0.25rem 0.5rem;
                                border-radius: 4px;
                                font-family: &quot;JetBrains Mono&quot;, monospace;
                            "
                            >計算結果は「5」です。</code
                        >
                    </p>

                    <div class="highlight-box success">
                        <p>
                            <strong>✅ ポイント</strong
                            ><br />Callクラス内のたった1箇所の修正だけで、処理を切り替えることができました。Javaにおける依存性について何となくイメージすることができましたでしょうか？<br /><br />「インターフェース依存」で重要なのは、Callクラスが依存しているのは実装クラス（AddCalc/SubCalc）そのものではなく、あくまでもCalculatorインターフェースであるということです。この仕組みがオブジェクト指向プログラミングの基本的な概念の一つである「ポリモーフィズム」に繋がります。
                        </p>
                    </div>
                </div>

                <!-- 2-1-5 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-1-5</span>
                        <h3>ポリモーフィズムとは？</h3>
                    </div>

                    <p>
                        ポリモーフィズム（多態性）とは、<strong>「同じ変数・同じメソッド名で、異なる処理を実行できる仕組み」</strong>のことです。
                    </p>

                    <div class="highlight-box info">
                        <p>
                            <strong>💡 ポリモーフィズムの具体例</strong><br />
                            先ほど作成したCalculatorの例を思い出してください。以下のコードでは、<code>calculator</code>という<strong>同じ変数</strong>で、AddCalcとSubCalcという<strong>異なる実装クラス</strong>を扱うことができました。
                        </p>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">ポリモーフィズムの動作例</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-comment">// パターン1: 加算クラスを代入</span>
<span class="code-type">Calculator</span> calculator = <span class="code-keyword">new</span> <span class="code-type">AddCalc</span>();
calculator.calc(<span class="number">10</span>, <span class="number">5</span>);  <span class="code-comment">// 結果: 15（加算）</span>

<span class="code-comment">// パターン2: 減算クラスを代入（変数名・型・メソッド名は同じ）</span>
<span class="code-type">Calculator</span> calculator = <span class="code-keyword">new</span> <span class="code-type">SubCalc</span>();
calculator.calc(<span class="number">10</span>, <span class="number">5</span>);  <span class="code-comment">// 結果: 5（減算）</span></pre>
                        </div>
                    </div>

                    <p>
                        重要なポイントは以下の3点です：
                    </p>

                    <ul class="feature-list">
                        <li>
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 13l4 4L19 7" />
                                </svg>
                            </span>
                            <span><strong>変数の型は同じ</strong>（Calculator型で統一）</span>
                        </li>
                        <li>
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 13l4 4L19 7" />
                                </svg>
                            </span>
                            <span><strong>メソッド名は同じ</strong>（calc()で統一）</span>
                        </li>
                        <li>
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 13l4 4L19 7" />
                                </svg>
                            </span>
                            <span><strong>実行される処理は異なる</strong>（AddCalcなら加算、SubCalcなら減算）</span>
                        </li>
                    </ul>

                    <div class="diagram">
                        <svg width="600" height="320" viewBox="0 0 600 320">
                            <!-- Title -->
                            <text
                                x="300"
                                y="25"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="14"
                                fill="#1e293b"
                                font-weight="600"
                            >
                                Calculator型の変数で、異なる実装クラスを扱える
                            </text>

                            <!-- Call class at top -->
                            <rect x="220" y="50" width="160" height="60" rx="8" fill="#3b82f6" stroke="#2563eb" stroke-width="2" />
                            <text x="300" y="75" text-anchor="middle" font-family="Noto Sans JP" font-size="12" fill="white" font-weight="600">
                                Callクラス（呼び出し側）
                            </text>
                            <text x="300" y="95" text-anchor="middle" font-family="JetBrains Mono" font-size="10" fill="white">
                                Calculator calculator = ...;
                            </text>

                            <!-- Arrow down -->
                            <path d="M300 110 L300 140" stroke="#64748b" stroke-width="2" />
                            <polygon points="300,145 295,135 305,135" fill="#64748b" />

                            <!-- Interface -->
                            <rect x="220" y="150" width="160" height="50" rx="8" fill="#10b981" stroke="#059669" stroke-width="3" />
                            <text x="300" y="172" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="white" font-weight="600">
                                《インターフェース》
                            </text>
                            <text x="300" y="190" text-anchor="middle" font-family="JetBrains Mono" font-size="13" fill="white" font-weight="bold">
                                Calculator
                            </text>

                            <!-- Arrows down to implementations -->
                            <path d="M250 200 L150 240" stroke="#10b981" stroke-width="2" stroke-dasharray="5,3" />
                            <polygon points="145,242 152,236 155,246" fill="#10b981" />

                            <path d="M300 200 L300 240" stroke="#10b981" stroke-width="2" stroke-dasharray="5,3" />
                            <polygon points="300,245 295,235 305,235" fill="#10b981" />

                            <path d="M350 200 L450 240" stroke="#10b981" stroke-width="2" stroke-dasharray="5,3" />
                            <polygon points="455,242 448,236 445,246" fill="#10b981" />

                            <!-- Implementation: AddCalc -->
                            <rect x="70" y="250" width="140" height="60" rx="8" fill="#f97316" stroke="#ea580c" stroke-width="2" />
                            <text x="140" y="270" text-anchor="middle" font-family="JetBrains Mono" font-size="12" fill="white" font-weight="600">
                                AddCalc
                            </text>
                            <text x="140" y="287" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="white">
                                calc()の実装
                            </text>
                            <text x="140" y="302" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="white">
                                return x + y;
                            </text>

                            <!-- Implementation: SubCalc -->
                            <rect x="230" y="250" width="140" height="60" rx="8" fill="#f97316" stroke="#ea580c" stroke-width="2" />
                            <text x="300" y="270" text-anchor="middle" font-family="JetBrains Mono" font-size="12" fill="white" font-weight="600">
                                SubCalc
                            </text>
                            <text x="300" y="287" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="white">
                                calc()の実装
                            </text>
                            <text x="300" y="302" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="white">
                                return x - y;
                            </text>

                            <!-- Implementation: MulCalc (future) -->
                            <rect x="390" y="250" width="140" height="60" rx="8" fill="#f97316" stroke="#ea580c" stroke-width="2" stroke-dasharray="5,3" />
                            <text x="460" y="270" text-anchor="middle" font-family="JetBrains Mono" font-size="12" fill="white" font-weight="600">
                                MulCalc
                            </text>
                            <text x="460" y="287" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="white">
                                calc()の実装
                            </text>
                            <text x="460" y="302" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="white">
                                return x * y;
                            </text>
                        </svg>
                        <p class="diagram-caption">図2.18 ポリモーフィズムの仕組み</p>
                    </div>

                    <div class="highlight-box success">
                        <p>
                            <strong>✅ ポリモーフィズムのメリット</strong><br />
                            新しい計算方法（例：掛け算のMulCalc）を追加しても、Callクラス側のコードは<strong>変数の型もメソッド名も変更不要</strong>です。インスタンス化する部分（<code>new</code>の部分）だけを変更すれば、新しい処理に切り替えられます。
                        </p>
                    </div>

                    <p>
                        このように、<strong>同じインターフェース型の変数で、複数の異なる実装クラスを扱える仕組み</strong>がポリモーフィズムです。これにより、コードの柔軟性が高まり、新しい機能の追加や変更が容易になります。
                    </p>

                    <div class="info-box" style="margin: 1.5rem 0;">
                        <p><strong>📝 補足</strong></p>
                        <p>
                            ここではインターフェースを使ってポリモーフィズムを説明しましたが、継承の「親クラス」を用いても同じ仕組みを実現できます。親クラス型の変数で、子クラスのインスタンスを扱うことができます。
                        </p>
                    </div>
                </div>
            </section>

            <!-- Section 2-2 -->
            <section id="section-2-2" class="section">
                <div class="section-header">
                    <span class="section-number">Section 2-2</span>
                    <h2 class="section-title">Webアプリケーション作成の必須知識を確認しよう</h2>
                </div>

                <p>
                    本書では「Spring
                    Framework」を使用してWebアプリケーションの作成を学習していきますが、Webアプリケーションの作成は、残念ながらプログラム言語（本書ではJava）の知識だけで、作成することはできません。ここでは、「Webアプリケーション作成の必須知識」を説明します。既に知っている方も復習を兼ねて参照をお願いします。
                </p>

                <!-- 2-2-1 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-2-1</span>
                        <h3>クライアントとサーバー</h3>
                    </div>

                    <p>
                        まずは、「クライアント」と「サーバー」の関係を考えてみましょう。「クライアント」とはサービスを受ける側、「サーバー」とはサービスを提供する側のことです。サーバーがサービスを提供し、そのサービスをクライアントが使用するという関係性になります。
                    </p>

                    <div class="diagram">
                        <svg width="580" height="200" viewBox="0 0 580 200">
                            <!-- Background areas -->
                            <rect x="30" y="30" width="180" height="140" rx="12" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1" stroke-dasharray="4,2" />
                            <rect x="370" y="30" width="180" height="140" rx="12" fill="#fff7ed" stroke="#fed7aa" stroke-width="1" stroke-dasharray="4,2" />

                            <!-- Client -->
                            <rect x="60" y="60" width="120" height="70" rx="8" fill="white" stroke="#0ea5e9" stroke-width="2" />
                            <rect x="75" y="75" width="90" height="40" rx="4" fill="#1e293b" />
                            <rect x="95" y="115" width="50" height="6" rx="2" fill="#64748b" />
                            <text x="120" y="145" text-anchor="middle" font-family="Noto Sans JP" font-size="12" fill="#0284c7" font-weight="600">クライアント</text>
                            <text x="120" y="160" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#64748b">サービスを受ける側</text>

                            <!-- Server -->
                            <rect x="400" y="55" width="120" height="80" rx="8" fill="white" stroke="#f97316" stroke-width="2" />
                            <rect x="420" y="70" width="80" height="50" rx="4" fill="#1e293b" />
                            <circle cx="460" cy="85" r="4" fill="#10b981" />
                            <circle cx="460" cy="97" r="4" fill="#f97316" />
                            <circle cx="460" cy="109" r="4" fill="#0ea5e9" />
                            <text x="460" y="150" text-anchor="middle" font-family="Noto Sans JP" font-size="12" fill="#ea580c" font-weight="600">サーバー</text>
                            <text x="460" y="165" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#64748b">サービスを提供する側</text>

                            <!-- Arrows -->
                            <defs>
                                <marker id="arrowBlue2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#0ea5e9" />
                                </marker>
                                <marker id="arrowOrange2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#f97316" />
                                </marker>
                            </defs>

                            <!-- Request Arrow -->
                            <path d="M190 85 L390 85" stroke="#0ea5e9" stroke-width="2.5" fill="none" marker-end="url(#arrowBlue2)" />
                            <rect x="250" y="68" width="80" height="24" rx="6" fill="#0ea5e9" />
                            <text x="290" y="84" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="white" font-weight="600">要求</text>

                            <!-- Response Arrow -->
                            <path d="M390 115 L190 115" stroke="#f97316" stroke-width="2.5" fill="none" marker-end="url(#arrowOrange2)" />
                            <rect x="245" y="105" width="90" height="24" rx="6" fill="#f97316" />
                            <text x="290" y="121" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="white" font-weight="600">サービス提供</text>

                            <!-- Summary -->
                            <rect x="80" y="180" width="420" height="18" rx="4" fill="#f8fafc" />
                            <text x="290" y="193" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#64748b">クライアントが要求 → サーバーがサービスを提供して返答</text>
                        </svg>
                        <p class="diagram-caption">図2.19 「クライアント」と「サーバー」</p>
                    </div>
                </div>

                <!-- 2-2-2 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-2-2</span>
                        <h3>アプリケーションとWebアプリケーション</h3>
                    </div>

                    <p>
                        「アプリケーション」とは「アプリケーションソフトウェア」の略語です。つまり「プログラミング言語で作成したソフトウェア」のことです。
                    </p>

                    <p>
                        「Webアプリケーション」とは「インターネット」を介して使うアプリケーションです。検索エンジン、通販サイト、e-ラーニングなど多くのアプリケーションが「Webアプリケーション」として世間に提供されています。
                    </p>
                </div>

                <!-- 2-2-3 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-2-3</span>
                        <h3>APサーバー</h3>
                    </div>

                    <p>
                        「AP（アプリケーション）サーバー」とは「Webアプリケーション」を配置するサーバーです。「APサーバー」は常時稼働しており、「クライアント」からのアクセス（要求）を待ち続けています。
                    </p>

                    <div class="diagram">
                        <svg width="550" height="160" viewBox="0 0 550 160">
                            <!-- Browser -->
                            <rect
                                x="30"
                                y="45"
                                width="90"
                                height="70"
                                rx="8"
                                fill="#f1f5f9"
                                stroke="#0ea5e9"
                                stroke-width="2"
                            />
                            <rect
                                x="40"
                                y="55"
                                width="70"
                                height="40"
                                rx="4"
                                fill="white"
                                stroke="#e2e8f0"
                                stroke-width="1"
                            />
                            <circle cx="50" cy="62" r="3" fill="#ef4444" />
                            <circle cx="60" cy="62" r="3" fill="#f59e0b" />
                            <circle cx="70" cy="62" r="3" fill="#10b981" />
                            <text
                                x="75"
                                y="130"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="11"
                                fill="#1e293b"
                                font-weight="600"
                            >
                                ブラウザ
                            </text>

                            <text
                                x="75"
                                y="150"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="9"
                                fill="#64748b"
                            >
                                クライアント
                            </text>

                            <!-- Internet Cloud -->
                            <ellipse
                                cx="200"
                                cy="80"
                                rx="50"
                                ry="35"
                                fill="#e0f2fe"
                                stroke="#0ea5e9"
                                stroke-width="2"
                            />
                            <text
                                x="200"
                                y="85"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="10"
                                fill="#0284c7"
                                font-weight="500"
                            >
                                インターネット
                            </text>

                            <!-- Arrow to Internet -->
                            <path d="M130 75 L145 75" stroke="#64748b" stroke-width="2" />
                            <polygon points="150,75 140,70 140,80" fill="#64748b" />

                            <!-- Arrow from Internet -->
                            <path d="M255 75 L270 75" stroke="#64748b" stroke-width="2" />
                            <polygon points="275,75 265,70 265,80" fill="#64748b" />

                            <!-- AP Server -->
                            <rect
                                x="280"
                                y="35"
                                width="130"
                                height="90"
                                rx="8"
                                fill="#f1f5f9"
                                stroke="#f97316"
                                stroke-width="2"
                            />
                            <rect
                                x="295"
                                y="50"
                                width="100"
                                height="60"
                                rx="6"
                                fill="#fff7ed"
                                stroke="#f97316"
                                stroke-width="1"
                            />
                            <text
                                x="345"
                                y="75"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="10"
                                fill="#c2410c"
                                font-weight="500"
                            >
                                Web
                            </text>
                            <text
                                x="345"
                                y="90"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="10"
                                fill="#c2410c"
                                font-weight="500"
                            >
                                アプリケーション
                            </text>
                            <text
                                x="345"
                                y="145"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="11"
                                fill="#1e293b"
                                font-weight="600"
                            >
                                APサーバー
                            </text>

                            <!-- Description boxes -->
                            <rect x="430" y="45" width="100" height="30" rx="6" fill="#f1f5f9" />
                            <text
                                x="480"
                                y="65"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="9"
                                fill="#64748b"
                            >
                                クライアントから
                            </text>
                            <text
                                x="480"
                                y="90"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="9"
                                fill="#64748b"
                            >
                                アクセス（要求）がきたら、
                            </text>
                            <text
                                x="480"
                                y="105"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="9"
                                fill="#64748b"
                            >
                                Webアプリケーションの
                            </text>
                            <text
                                x="480"
                                y="120"
                                text-anchor="middle"
                                font-family="Noto Sans JP"
                                font-size="9"
                                fill="#64748b"
                            >
                                サービスを提供する
                            </text>
                        </svg>
                        <p class="diagram-caption">図2.20 「クライアント」と「APサーバー」</p>
                    </div>
                </div>

                <!-- 2-2-4 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-2-4</span>
                        <h3>HTTP通信</h3>
                    </div>

                    <p>
                        HTTP（HyperText Transfer
                        Protocol：ハイパーテキスト・トランスファー・プロトコル）は、インターネット上で情報を送受信するためのプロトコル（通信のルール）です。
                    </p>

                    <p>
                        「クライアント」と「APサーバー」は「HTTPリクエスト」と「HTTPレスポンス」でやり取りを行います。このことを「HTTP通信」といいます。簡単に考えるとリクエストは「要求」、レスポンスは「返答」です。「クライアント」からの「要求」に対して、「APサーバー」が「返答」します。
                    </p>

                    <div class="diagram">
                        <svg width="600" height="260" viewBox="0 0 600 260">
                            <!-- Background areas -->
                            <rect x="20" y="40" width="170" height="170" rx="12" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1" stroke-dasharray="4,2" />
                            <text x="105" y="200" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#0284c7">クライアント側</text>

                            <rect x="410" y="40" width="170" height="170" rx="12" fill="#fff7ed" stroke="#fed7aa" stroke-width="1" stroke-dasharray="4,2" />
                            <text x="495" y="200" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#c2410c">サーバー側</text>

                            <!-- Browser -->
                            <rect x="45" y="70" width="120" height="80" rx="8" fill="white" stroke="#0ea5e9" stroke-width="2" />
                            <rect x="55" y="80" width="100" height="20" rx="4" fill="#f1f5f9" stroke="#e2e8f0" />
                            <text x="105" y="94" text-anchor="middle" font-family="JetBrains Mono" font-size="8" fill="#64748b">https://...</text>
                            <rect x="55" y="105" width="100" height="35" rx="4" fill="#f8fafc" stroke="#e2e8f0" />
                            <text x="105" y="165" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#0284c7" font-weight="600">ブラウザ</text>

                            <!-- Web Application / Server -->
                            <rect x="435" y="70" width="120" height="80" rx="8" fill="white" stroke="#f97316" stroke-width="2" />
                            <rect x="445" y="80" width="100" height="60" rx="4" fill="#fff7ed" />
                            <text x="495" y="105" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#c2410c" font-weight="500">Web</text>
                            <text x="495" y="120" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#c2410c" font-weight="500">アプリケーション</text>
                            <text x="495" y="165" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#ea580c" font-weight="600">APサーバー</text>

                            <!-- Request Arrow (Top) -->
                            <defs>
                                <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#0ea5e9" />
                                </marker>
                                <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#f97316" />
                                </marker>
                            </defs>

                            <!-- Step 1: Request -->
                            <path d="M175 90 L425 90" stroke="#0ea5e9" stroke-width="3" fill="none" marker-end="url(#arrowBlue)" />
                            <rect x="240" y="60" width="120" height="40" rx="6" fill="#0ea5e9" />
                            <text x="300" y="77" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="white" font-weight="600">HTTPリクエスト</text>
                            <text x="300" y="92" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#bae6fd">（要求）</text>

                            <!-- Step number 1 -->
                            <circle cx="215" cy="75" r="14" fill="#0ea5e9" />
                            <text x="215" y="80" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="white" font-weight="700">1</text>

                            <!-- Step 2: Response -->
                            <path d="M425 130 L175 130" stroke="#f97316" stroke-width="3" fill="none" marker-end="url(#arrowOrange)" />
                            <rect x="240" y="115" width="120" height="40" rx="6" fill="#f97316" />
                            <text x="300" y="132" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="white" font-weight="600">HTTPレスポンス</text>
                            <text x="300" y="147" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#fed7aa">（返答）</text>

                            <!-- Step number 2 -->
                            <circle cx="385" cy="130" r="14" fill="#f97316" />
                            <text x="385" y="135" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="white" font-weight="700">2</text>

                            <!-- Summary box -->
                            <rect x="50" y="220" width="500" height="35" rx="8" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1" />
                            <text x="300" y="242" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#475569">
                                <tspan fill="#0ea5e9" font-weight="600">① リクエスト（要求）</tspan>
                                <tspan>：クライアントがサーバーに処理を依頼</tspan>
                                <tspan dx="20" fill="#f97316" font-weight="600">② レスポンス（返答）</tspan>
                                <tspan>：サーバーが結果を返す</tspan>
                            </text>
                        </svg>
                        <p class="diagram-caption">図2.21 「HTTP通信」の流れ</p>
                    </div>
                </div>

                <!-- 2-2-5 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-2-5</span>
                        <h3>GETメソッドとPOSTメソッド</h3>
                    </div>

                    <p>「GETメソッド」と「POSTメソッド」は「HTTPリクエスト」の種類です。</p>

                    <p>
                        <strong>「GETメソッド」</strong
                        >は「ブラウザ」から「サーバー」に値を渡す時に、URLの後ろに値を足して送ることができます。URLの後ろに足される情報を「クエリストリング」または「クエリ文字列」と呼びます。「クエリストリング」の特徴は以下の3つになります。
                    </p>

                    <ul class="feature-list">
                        <li>
                            <span class="icon"
                                ><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 13l4 4L19 7" /></svg
                            ></span>
                            <span>URLの末尾に「?」が付き、ここから「クエリストリング」の開始を示します</span>
                        </li>
                        <li>
                            <span class="icon"
                                ><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 13l4 4L19 7" /></svg
                            ></span>
                            <span>形式は「名前=値」です</span>
                        </li>
                        <li>
                            <span class="icon"
                                ><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 13l4 4L19 7" /></svg
                            ></span>
                            <span>複数の値を渡したい場合は「&amp;」でつなげます</span>
                        </li>
                    </ul>

                    <p>
                        <strong>「POSTメソッド」</strong
                        >とは「ブラウザ」から「サーバー」に値を渡す時に、「リクエストボディ」という「見えない場所」に値を格納して送る方法です。通販サイトなどで個人情報を登録する時は、入力した内容をURLに表示させたくないため、「POSTメソッド」が使用されています。また「POSTメソッド」は大量の値を送るのに適しています。
                    </p>

                    <div class="highlight-box">
                        <p>
                            <strong>📌 GETとPOSTの違い</strong
                            ><br />「GET」は「受け取る、もらう」という意味があり、「POST」は「郵便」という意味があります。つまり「GET」は指定したURLに対する内容を「取得」するためのメソッド、「POST」は指定したURLへ入力情報を「送信」するためのメソッドとイメージできます。
                        </p>
                    </div>

                    <div class="diagram">
                        <svg width="600" height="280" viewBox="0 0 600 280">
                            <!-- GET Section -->
                            <rect x="20" y="15" width="270" height="250" rx="12" fill="#ecfdf5" stroke="#10b981" stroke-width="2" />

                            <!-- GET Header -->
                            <rect x="20" y="15" width="270" height="40" rx="12" fill="#10b981" />
                            <rect x="20" y="40" width="270" height="15" fill="#10b981" />
                            <text x="155" y="42" text-anchor="middle" font-family="Noto Sans JP" font-size="16" fill="white" font-weight="700">GET</text>
                            <text x="155" y="65" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#065f46">「取得する」= 情報をもらう</text>

                            <!-- GET URL Bar -->
                            <rect x="35" y="85" width="240" height="35" rx="6" fill="white" stroke="#d1d5db" stroke-width="1" />
                            <text x="45" y="107" font-family="JetBrains Mono" font-size="9" fill="#64748b">https://example.com/search</text>
                            <text x="45" y="107" font-family="JetBrains Mono" font-size="9" fill="#10b981" font-weight="600" dx="155">?q=java</text>

                            <!-- GET visible indicator -->
                            <circle cx="260" cy="107" r="8" fill="#10b981" />
                            <text x="260" y="111" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="white">👁</text>

                            <text x="155" y="140" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#059669" font-weight="600">↑ URLにデータが見える</text>

                            <!-- GET Features -->
                            <rect x="35" y="155" width="240" height="100" rx="6" fill="white" stroke="#a7f3d0" stroke-width="1" />
                            <text x="155" y="175" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#475569" font-weight="600">特徴</text>
                            <text x="50" y="195" font-family="Noto Sans JP" font-size="9" fill="#64748b">• クエリストリング（?key=value）</text>
                            <text x="50" y="212" font-family="Noto Sans JP" font-size="9" fill="#64748b">• ブックマーク・共有が可能</text>
                            <text x="50" y="229" font-family="Noto Sans JP" font-size="9" fill="#64748b">• データ量に制限あり</text>
                            <text x="50" y="246" font-family="Noto Sans JP" font-size="9" fill="#64748b">• 検索、ページ表示などに使用</text>

                            <!-- POST Section -->
                            <rect x="310" y="15" width="270" height="250" rx="12" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" />

                            <!-- POST Header -->
                            <rect x="310" y="15" width="270" height="40" rx="12" fill="#f59e0b" />
                            <rect x="310" y="40" width="270" height="15" fill="#f59e0b" />
                            <text x="445" y="42" text-anchor="middle" font-family="Noto Sans JP" font-size="16" fill="white" font-weight="700">POST</text>
                            <text x="445" y="65" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#92400e">「郵便」= 情報を送る</text>

                            <!-- POST URL Bar -->
                            <rect x="325" y="85" width="240" height="35" rx="6" fill="white" stroke="#d1d5db" stroke-width="1" />
                            <text x="335" y="107" font-family="JetBrains Mono" font-size="9" fill="#64748b">https://example.com/login</text>

                            <!-- POST hidden indicator -->
                            <circle cx="550" cy="107" r="8" fill="#f59e0b" />
                            <text x="550" y="111" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="white">🔒</text>

                            <text x="445" y="140" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#d97706" font-weight="600">↑ URLにデータは見えない</text>

                            <!-- POST Body -->
                            <rect x="325" y="155" width="240" height="50" rx="6" fill="#1e293b" stroke="#475569" stroke-width="1" />
                            <text x="445" y="175" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#94a3b8">リクエストボディ（非表示）</text>
                            <text x="445" y="193" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#4ade80">{ "user": "xxx", "pass": "***" }</text>

                            <!-- POST Features -->
                            <rect x="325" y="215" width="240" height="45" rx="6" fill="white" stroke="#fcd34d" stroke-width="1" />
                            <text x="340" y="233" font-family="Noto Sans JP" font-size="9" fill="#64748b">• 大量データ送信可能</text>
                            <text x="340" y="250" font-family="Noto Sans JP" font-size="9" fill="#64748b">• 個人情報・ログインなどに使用</text>
                        </svg>
                        <p class="diagram-caption">図2.22 GETとPOSTのイメージ</p>
                    </div>
                </div>

                <!-- 2-2-6 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-2-6</span>
                        <h3>3層構造</h3>
                    </div>

                    <p>
                        実際のサーバー構成は、Webサーバー、APサーバー、DB（データベース）サーバーの3つに分けます。このことを「3層構造」と言います。
                    </p>

                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>サーバー</th>
                                <th>役割</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Webサーバー</strong></td>
                                <td>Webブラウザを通じてユーザーと直接やり取りを行うサーバー</td>
                            </tr>
                            <tr>
                                <td><strong>APサーバー</strong></td>
                                <td>ビジネスロジック（計算、データ加工など）を処理するサーバー</td>
                            </tr>
                            <tr>
                                <td><strong>DBサーバー</strong></td>
                                <td>データの保存、更新、削除、参照などを行うサーバー</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="diagram">
                        <svg width="650" height="280" viewBox="0 0 650 280">
                            <!-- Title -->
                            <text x="325" y="20" text-anchor="middle" font-family="Noto Sans JP" font-size="12" fill="#475569" font-weight="600">3層構造（3-Tier Architecture）</text>

                            <!-- Client Section -->
                            <rect x="20" y="40" width="100" height="120" rx="10" fill="#f8fafc" stroke="#94a3b8" stroke-width="1" stroke-dasharray="4,2" />
                            <rect x="35" y="60" width="70" height="50" rx="6" fill="white" stroke="#64748b" stroke-width="2" />
                            <rect x="43" y="68" width="54" height="30" rx="3" fill="#1e293b" />
                            <text x="70" y="125" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#64748b">ブラウザ</text>
                            <text x="70" y="150" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#94a3b8">クライアント</text>

                            <!-- Arrow to Web Server -->
                            <path d="M130 100 L165 100" stroke="#64748b" stroke-width="2" fill="none" />
                            <polygon points="170,100 160,95 160,105" fill="#64748b" />

                            <!-- Web Server -->
                            <rect x="175" y="40" width="130" height="200" rx="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" />
                            <rect x="175" y="40" width="130" height="35" rx="10" fill="#3b82f6" />
                            <rect x="175" y="65" width="130" height="10" fill="#3b82f6" />
                            <text x="240" y="63" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="white" font-weight="600">Webサーバー</text>

                            <text x="240" y="95" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#1d4ed8" font-weight="500">役割</text>
                            <text x="240" y="112" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#475569">ユーザーと直接</text>
                            <text x="240" y="125" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#475569">やり取りを行う</text>

                            <rect x="185" y="140" width="110" height="45" rx="4" fill="white" stroke="#93c5fd" stroke-width="1" />
                            <text x="240" y="157" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#64748b">サービス例</text>
                            <text x="240" y="175" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#2563eb" font-weight="500">Apache, Nginx</text>

                            <rect x="185" y="195" width="110" height="35" rx="4" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1" />
                            <text x="240" y="217" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#3b82f6">静的コンテンツ配信</text>

                            <!-- Arrow to AP Server -->
                            <path d="M315 100 L350 100" stroke="#64748b" stroke-width="2" fill="none" />
                            <polygon points="355,100 345,95 345,105" fill="#64748b" />

                            <!-- AP Server -->
                            <rect x="360" y="40" width="130" height="200" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" />
                            <rect x="360" y="40" width="130" height="35" rx="10" fill="#f59e0b" />
                            <rect x="360" y="65" width="130" height="10" fill="#f59e0b" />
                            <text x="425" y="63" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="white" font-weight="600">APサーバー</text>

                            <text x="425" y="95" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#b45309" font-weight="500">役割</text>
                            <text x="425" y="112" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#475569">ビジネスロジック</text>
                            <text x="425" y="125" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#475569">（計算・データ加工）</text>

                            <rect x="370" y="140" width="110" height="45" rx="4" fill="white" stroke="#fcd34d" stroke-width="1" />
                            <text x="425" y="157" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#64748b">サービス例</text>
                            <text x="425" y="175" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#d97706" font-weight="500">Tomcat, JBoss</text>

                            <rect x="370" y="195" width="110" height="35" rx="4" fill="#fefce8" stroke="#fde68a" stroke-width="1" />
                            <text x="425" y="217" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#b45309">Java / Spring Boot</text>

                            <!-- Arrow to DB Server -->
                            <path d="M500 100 L535 100" stroke="#64748b" stroke-width="2" fill="none" />
                            <polygon points="540,100 530,95 530,105" fill="#64748b" />

                            <!-- DB Server -->
                            <rect x="545" y="40" width="95" height="200" rx="10" fill="#fce7f3" stroke="#ec4899" stroke-width="2" />
                            <rect x="545" y="40" width="95" height="35" rx="10" fill="#ec4899" />
                            <rect x="545" y="65" width="95" height="10" fill="#ec4899" />
                            <text x="592" y="63" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="white" font-weight="600">DBサーバー</text>

                            <text x="592" y="95" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#be185d" font-weight="500">役割</text>
                            <text x="592" y="112" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#475569">データの保存</text>
                            <text x="592" y="125" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#475569">更新・削除・参照</text>

                            <rect x="555" y="140" width="75" height="45" rx="4" fill="white" stroke="#f9a8d4" stroke-width="1" />
                            <text x="592" y="157" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#64748b">サービス例</text>
                            <text x="592" y="175" text-anchor="middle" font-family="JetBrains Mono" font-size="8" fill="#db2777" font-weight="500">MySQL</text>

                            <rect x="555" y="195" width="75" height="35" rx="4" fill="#fdf2f8" stroke="#fbcfe8" stroke-width="1" />
                            <text x="592" y="212" text-anchor="middle" font-family="JetBrains Mono" font-size="8" fill="#be185d">PostgreSQL</text>
                            <text x="592" y="225" text-anchor="middle" font-family="JetBrains Mono" font-size="8" fill="#be185d">Oracle</text>

                            <!-- Bottom Labels -->
                            <rect x="175" y="250" width="130" height="20" rx="4" fill="#eff6ff" />
                            <text x="240" y="264" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#3b82f6">第1層</text>

                            <rect x="360" y="250" width="130" height="20" rx="4" fill="#fefce8" />
                            <text x="425" y="264" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#d97706">第2層</text>

                            <rect x="545" y="250" width="95" height="20" rx="4" fill="#fdf2f8" />
                            <text x="592" y="264" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#db2777">第3層</text>
                        </svg>
                        <p class="diagram-caption">図2.23 3層構造</p>
                    </div>

                    <div class="highlight-box success">
                        <p>
                            <strong>✅ 分割の目的</strong
                            ><br />このように各サーバーにそれぞれの役割を持たせることで、システム全体が効率的に動作し、拡張や保守も容易になります。
                        </p>
                    </div>

                    <div class="concept-cards" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                        <div class="concept-card">
                            <div
                                class="concept-card-icon"
                                style="background: linear-gradient(135deg, #10b981, #34d399)"
                            >
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="8" r="3" />
                                    <path d="M12 11v10" />
                                    <path d="M8 15l-4 4" />
                                    <path d="M16 15l4 4" />
                                </svg>
                            </div>
                            <h4>役割の分離</h4>
                            <p>各サーバーが独立した責任を持つことで、システム全体が効率的に動作し、保守も容易になります。</p>
                        </div>
                        <div class="concept-card">
                            <div
                                class="concept-card-icon"
                                style="background: linear-gradient(135deg, #3b82f6, #60a5fa)"
                            >
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="2" y="3" width="20" height="14" rx="2" />
                                    <rect x="8" y="7" width="8" height="6" rx="1" />
                                    <path d="M8 21h8" />
                                    <path d="M12 17v4" />
                                </svg>
                            </div>
                            <h4>柔軟な拡張</h4>
                            <p>各層を複数サーバーで構成できるため、スケーラビリティ（拡張性）と耐障害性が向上します。</p>
                        </div>
                        <div class="concept-card">
                            <div
                                class="concept-card-icon"
                                style="background: linear-gradient(135deg, #8b5cf6, #a78bfa)"
                            >
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2L2 7l10 5 10-5-10-5z" />
                                    <path d="M2 17l10 5 10-5" />
                                    <path d="M2 12l10 5 10-5" />
                                </svg>
                            </div>
                            <h4>クラス分割</h4>
                            <p>
                                プログラム内でもクラスを分割することで、コードの再利用性、可読性、保守性が向上します。
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 2-3 -->
            <section id="section-2-3" class="section">
                <div class="section-header">
                    <span class="section-number">Section 2-3</span>
                    <h2 class="section-title">開発で使用する便利なライブラリとツールを知ろう</h2>
                </div>

                <p>
                    この章の最後として、アプリケーション開発が格段に楽になる便利なライブラリとツールを紹介します。便利なライブラリやツールを利用して、煩雑な作業から解放されましょう。まず<strong>ビルドツール「Maven」</strong>について理解し、その後で<strong>便利なライブラリ「Lombok」</strong>の使い方を学びます。
                </p>

                <div class="highlight-box info" style="margin: 1.5rem 0;">
                    <p style="margin: 0; line-height: 1.8;">
                        <strong>📘 この節で学ぶこと</strong><br>
                        <strong>1. Maven</strong> - Javaプロジェクトでライブラリを管理する仕組み（依存関係の管理）<br>
                        <strong>2. Lombok</strong> - getter/setterを自動生成してくれる便利なライブラリ<br>
                        <strong>3. 実践</strong> - MavenでLombokを追加して実際に使ってみる
                    </p>
                </div>

                <!-- 2-3-1 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-3-1</span>
                        <h3>ビルドツールとは？（Maven）</h3>
                    </div>

                    <p>
                        Lombokのような便利なライブラリを使うには、まず<strong>「依存関係の管理」</strong>について理解する必要があります。<strong>Maven</strong>は、Javaプロジェクトでライブラリの管理を自動化してくれるビルドツールです。
                    </p>

                    <div class="highlight-box info" style="margin: 1.5rem 0;">
                        <p style="margin: 0; line-height: 1.8;">
                            <strong>📌 前提条件：Spring Initializrでプロジェクトを作成済み</strong><br>
                            本セクションでは、<strong>Spring Initializrでプロジェクトを作成済み</strong>であることを前提としています。<br><br>
                            <strong>Mavenの事前インストールは不要です。</strong><br>
                            Spring Initializrで作成したプロジェクトには<code>mvnw</code>（Maven Wrapper）が含まれているため、Mavenを別途インストールする必要はありません。VSCodeで開けばすぐに使えます。
                        </p>
                    </div>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ なぜMavenが必要なのか？</h4>

                    <p>
                        Javaでライブラリ（例：Lombok）を使うには、以下の手順が必要です：
                    </p>

                    <div style="background: #fef2f2; border: 2px solid #fecaca; border-radius: 10px; padding: 1.5rem; margin: 1rem 0;">
                        <p style="margin: 0 0 0.75rem 0; font-weight: 600; color: #991b1b;">
                            ❌ Mavenを使わない場合（手動）
                        </p>
                        <ol style="margin: 0; padding-left: 1.5rem; color: #7f1d1d;">
                            <li>ライブラリのJARファイルをネットからダウンロード</li>
                            <li>正しいバージョンを探して選ぶ</li>
                            <li>プロジェクトのクラスパスに手動で追加</li>
                            <li>依存するライブラリも全て手動でダウンロード</li>
                        </ol>
                        <p style="margin: 0.75rem 0 0 0; color: #991b1b; font-size: 0.9em;">
                            <strong>→ 非常に手間がかかり、バージョン管理も大変！</strong>
                        </p>
                    </div>

                    <div style="background: #f0fdf4; border: 2px solid #bbf7d0; border-radius: 10px; padding: 1.5rem; margin: 1rem 0;">
                        <p style="margin: 0 0 0.75rem 0; font-weight: 600; color: #166534;">
                            ✅ Mavenを使う場合（自動）
                        </p>
                        <ol style="margin: 0; padding-left: 1.5rem; color: #14532d;">
                            <li><code>pom.xml</code>にライブラリ名を記述するだけ</li>
                            <li>Mavenが自動的にダウンロードしてくれる</li>
                            <li>依存するライブラリも自動的に解決</li>
                        </ol>
                        <p style="margin: 0.75rem 0 0 0; color: #166534; font-size: 0.9em;">
                            <strong>→ 簡単で、バージョン管理も自動化！</strong>
                        </p>
                    </div>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600;">■ pom.xml - Mavenの設定ファイル</h4>

                    <p>
                        Spring Initializrで作成したプロジェクトには、<code>pom.xml</code>というファイルが含まれています。このファイルに使いたいライブラリを記述すると、Mavenが自動的にダウンロードしてくれます。
                    </p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">pom.xml - 依存関係の記述例</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">&lt;dependencies&gt;</span>
    <span class="code-comment">&lt;!-- Spring Boot Starter Web --&gt;</span>
    <span class="code-keyword">&lt;dependency&gt;</span>
        <span class="code-keyword">&lt;groupId&gt;</span>org.springframework.boot<span class="code-keyword">&lt;/groupId&gt;</span>
        <span class="code-keyword">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="code-keyword">&lt;/artifactId&gt;</span>
    <span class="code-keyword">&lt;/dependency&gt;</span>

    <span class="code-comment">&lt;!-- Lombok（これから追加する） --&gt;</span>
    <span class="code-keyword">&lt;dependency&gt;</span>
        <span class="code-keyword">&lt;groupId&gt;</span>org.projectlombok<span class="code-keyword">&lt;/groupId&gt;</span>
        <span class="code-keyword">&lt;artifactId&gt;</span>lombok<span class="code-keyword">&lt;/artifactId&gt;</span>
    <span class="code-keyword">&lt;/dependency&gt;</span>
<span class="code-keyword">&lt;/dependencies&gt;</span></pre>
                        </div>
                    </div>

                    <div style="background: #f0f9ff; border: 2px solid #0ea5e9; border-radius: 10px; padding: 1.25rem; margin: 1.5rem 0;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #0369a1;">
                            💡 pom.xmlに記述するだけ！
                        </p>
                        <p style="margin: 0; font-size: 0.9em; color: #0c4a6e; line-height: 1.7;">
                            <code>&lt;dependency&gt;</code>ブロックを<code>&lt;dependencies&gt;</code>の中に追加するだけで、Mavenが：<br>
                            ✓ 自動的にライブラリをダウンロード<br>
                            ✓ 必要な関連ライブラリも一緒にダウンロード<br>
                            ✓ プロジェクトで使えるように設定<br><br>
                            <strong>これから説明するLombokも、pom.xmlに追加するだけで使えるようになります。</strong>
                        </p>
                    </div>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600;">■ 【参考】Gradleとの比較</h4>

                    <p style="font-size: 0.95em; color: #64748b;">
                        本カリキュラムではMavenを使用しますが、参考としてGradleについても簡単に紹介します。Gradleは2012年に登場した、より新しいビルドツールで、Androidアプリ開発の標準ツールとして採用されています。
                    </p>

                    <div class="sample-code-grid" style="gap: 1.5rem; margin: 1.5rem 0;">
                        <!-- Maven -->
                        <div style="background: #fff7ed; border: 2px solid #fb923c; border-radius: 10px; overflow: hidden;">
                            <div style="background: #c2410c; padding: 0.75rem 1rem;">
                                <p style="margin: 0; color: white; font-weight: 600;">Maven（本カリキュラムで使用）</p>
                            </div>
                            <div style="padding: 1rem;">
                                <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #c2410c; font-size: 0.9em;">設定ファイル: pom.xml</p>
                                <ul style="margin: 0 0 1rem 0; padding-left: 1.25rem; color: #78716c; font-size: 0.85em;">
                                    <li>XML形式で記述</li>
                                    <li>情報が豊富で学習しやすい</li>
                                    <li>Spring Bootの標準</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Gradle -->
                        <div style="background: #f0fdf4; border: 2px solid #4ade80; border-radius: 10px; overflow: hidden;">
                            <div style="background: #059669; padding: 0.75rem 1rem;">
                                <p style="margin: 0; color: white; font-weight: 600;">Gradle（参考）</p>
                            </div>
                            <div style="padding: 1rem;">
                                <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #059669; font-size: 0.9em;">設定ファイル: build.gradle</p>
                                <ul style="margin: 0; padding-left: 1.25rem; color: #78716c; font-size: 0.85em;">
                                    <li>Groovy/Kotlin形式で記述</li>
                                    <li>記述が簡潔</li>
                                    <li>Android開発の標準</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="highlight-box success">
                        <p style="margin: 0; line-height: 1.8;">
                            <strong>✅ Mavenのまとめ</strong><br>
                            • <code>pom.xml</code>にライブラリを記述するだけで自動ダウンロード<br>
                            • Spring Initializrで作成したプロジェクトにはMaven Wrapper（<code>mvnw</code>）が含まれているため、Mavenの事前インストールは不要<br>
                            • 次のセクションで、実際にpom.xmlにLombokを追加して使ってみます
                        </p>
                    </div>
                </div>

                <!-- 2-3-2 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-3-2</span>
                        <h3>Lombokとは？</h3>
                    </div>

                    <p>
                        <strong>Lombok（ロンボック）</strong>は、Javaのクラスに必要なgetter/setterなどの<strong>定型的なコード（ボイラープレートコード）を自動生成してくれるライブラリ</strong>です。Spring Bootプロジェクトで広く使用されています。
                    </p>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ Lombokが解決する問題</h4>

                    <p>
                        Javaでクラスを作る際、通常は以下のようなコードを何度も書く必要があります。
                    </p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">Lombokなし - 冗長なコード</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">public class</span> <span class="code-type">User</span> {
    <span class="code-keyword">private</span> <span class="code-type">String</span> name;
    <span class="code-keyword">private</span> <span class="code-type">Integer</span> age;

    <span class="code-comment">// getter（2つ）</span>
    <span class="code-keyword">public</span> <span class="code-type">String</span> getName() {
        <span class="code-keyword">return</span> name;
    }
    <span class="code-keyword">public</span> <span class="code-type">Integer</span> getAge() {
        <span class="code-keyword">return</span> age;
    }

    <span class="code-comment">// setter（2つ）</span>
    <span class="code-keyword">public void</span> setName(<span class="code-type">String</span> name) {
        <span class="code-keyword">this</span>.name = name;
    }
    <span class="code-keyword">public void</span> setAge(<span class="code-type">Integer</span> age) {
        <span class="code-keyword">this</span>.age = age;
    }
}
<span class="code-comment">// フィールドが増えるたびにgetter/setterを追加する必要がある...</span></pre>
                        </div>
                    </div>

                    <p style="margin: 1rem 0; color: #dc2626; font-weight: 500;">
                        ❌ フィールドが10個あれば、getter 10個 + setter 10個 = 20個のメソッドを書くことになります。
                    </p>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ Lombokを使うと...</h4>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">Lombokあり - シンプルなコード</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">import</span> lombok.Data;

<span class="code-annotation">@Data</span>  <span class="code-comment">← このアノテーションだけで全部自動生成！</span>
<span class="code-keyword">public class</span> <span class="code-type">User</span> {
    <span class="code-keyword">private</span> <span class="code-type">String</span> name;
    <span class="code-keyword">private</span> <span class="code-type">Integer</span> age;
}
<span class="code-comment">// getter/setterが自動的に生成される（コンパイル時）</span></pre>
                        </div>
                    </div>

                    <p style="margin: 1rem 0; color: #16a34a; font-weight: 500;">
                        ✅ たった1行のアノテーション <code>@Data</code> で、getter/setter/toString/equals/hashCodeが全て自動生成されます！
                    </p>

                    <div class="highlight-box success">
                        <p>
                            <strong>💡 Lombokのメリット</strong>
                        </p>
                        <ul style="margin: 0.5rem 0 0 1.5rem; line-height: 1.8;">
                            <li><strong>コードが短くなる</strong> - getter/setterを書く必要がない</li>
                            <li><strong>メンテナンスが楽</strong> - フィールドを追加しても、getter/setterは自動で追加される</li>
                            <li><strong>読みやすい</strong> - 本質的なフィールド定義だけが残る</li>
                        </ul>
                    </div>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ Lombokの仕組み</h4>

                    <div class="diagram">
                        <svg width="600" height="180" viewBox="0 0 600 180">
                            <!-- Title -->
                            <text x="300" y="25" text-anchor="middle" font-family="Noto Sans JP" font-size="13" fill="#475569" font-weight="600">Lombokがコンパイル時にコードを自動生成</text>

                            <!-- Source Code (Before Compile) -->
                            <rect x="30" y="50" width="200" height="100" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
                            <text x="130" y="70" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#92400e" font-weight="600">ソースコード（.java）</text>

                            <text x="40" y="95" font-family="JetBrains Mono" font-size="10" fill="#f59e0b" font-weight="600">@Data</text>
                            <text x="40" y="110" font-family="JetBrains Mono" font-size="9" fill="#78716c">class User {</text>
                            <text x="50" y="125" font-family="JetBrains Mono" font-size="9" fill="#78716c">  String name;</text>
                            <text x="50" y="140" font-family="JetBrains Mono" font-size="9" fill="#78716c">  Integer age;</text>
                            <text x="40" y="155" font-family="JetBrains Mono" font-size="9" fill="#78716c">}</text>

                            <!-- Arrow -->
                            <defs>
                                <marker id="arrowLombok" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#10b981" />
                                </marker>
                            </defs>
                            <path d="M240 100 L360 100" stroke="#10b981" stroke-width="3" fill="none" marker-end="url(#arrowLombok)" />
                            <text x="300" y="90" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#10b981" font-weight="600">コンパイル時</text>
                            <text x="300" y="120" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#10b981">Lombokが処理</text>

                            <!-- Compiled Code (After Compile) -->
                            <rect x="370" y="50" width="200" height="100" rx="8" fill="#dcfce7" stroke="#10b981" stroke-width="2"/>
                            <text x="470" y="70" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#166534" font-weight="600">コンパイル後（.class）</text>

                            <text x="380" y="95" font-family="JetBrains Mono" font-size="9" fill="#78716c">class User {</text>
                            <text x="390" y="108" font-family="JetBrains Mono" font-size="8" fill="#78716c">  String name;</text>
                            <text x="390" y="119" font-family="JetBrains Mono" font-size="8" fill="#78716c">  Integer age;</text>
                            <text x="390" y="131" font-family="JetBrains Mono" font-size="8" fill="#16a34a">  getName() { ... }  ✓</text>
                            <text x="390" y="143" font-family="JetBrains Mono" font-size="8" fill="#16a34a">  setName(...) { ... }  ✓</text>
                            <text x="490" y="155" font-family="Noto Sans JP" font-size="7" fill="#059669">+ その他自動生成</text>
                        </svg>
                        <p class="diagram-caption">図2.24 Lombokの動作イメージ</p>
                    </div>

                    <p style="margin: 1rem 0; font-size: 0.95em; color: #475569;">
                        Lombokは<strong>「@Data」などのアノテーション（<code>@</code>で始まる記述）</strong>を使って、コンパイル時に自動的にgetter/setterなどのメソッドを生成します。開発者はフィールドの定義だけを書けばよく、冗長なコードを書く必要がなくなります。
                    </p>
                </div>

                <!-- 2-3-3 -->
                <div class="subsection">
                    <div class="subsection-header">
                        <span class="subsection-num">2-3-3</span>
                        <h3>Lombokを使用したプログラムの作成</h3>
                    </div>

                    <p>プログラムを作成しながら、Lombokの提供する機能の一部を学習しましょう。</p>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ なぜGetter・Setterが必要なのか？</h4>

                    <p style="margin-bottom: 1rem;">
                        まず、<strong>なぜフィールドを<code>private</code>にして、Getter・Setterを使う必要があるのか</strong>を理解しましょう。
                    </p>

                    <div style="background: linear-gradient(135deg, #fef2f2, #fee2e2); border: 2px solid #ef4444; border-radius: 10px; padding: 1.5rem; margin: 1.5rem 0;">
                        <p style="margin: 0 0 1rem 0; font-weight: 600; color: #991b1b; font-size: 1em;">
                            ❌ 悪い例：フィールドを<code>public</code>にした場合
                        </p>
                        <div class="code-block" style="margin: 0;">
                            <div class="code-content">
                                <pre><span class="code-keyword">public class</span> <span class="code-type">User</span> {
    <span class="code-keyword">public</span> <span class="code-type">String</span> name;    <span class="code-comment">// どこからでもアクセス可能</span>
    <span class="code-keyword">public</span> <span class="code-type">Integer</span> age;   <span class="code-comment">// どこからでもアクセス可能</span>
}

<span class="code-comment">// 外部のコードから...</span>
<span class="code-type">User</span> user = <span class="code-keyword">new</span> <span class="code-type">User</span>();
user.name = <span class="code-string">""</span>;           <span class="code-comment">// 空文字でも代入できてしまう</span>
user.name = <span class="code-keyword">null</span>;        <span class="code-comment">// nullも代入できてしまう</span>
user.age = <span class="number">-10</span>;          <span class="code-comment">// マイナスの年齢も設定できてしまう</span>
user.age = <span class="number">999</span>;          <span class="code-comment">// ありえない年齢も設定できてしまう</span></pre>
                            </div>
                        </div>
                        <div style="background: #fef2f2; border-left: 4px solid #ef4444; padding: 1rem; border-radius: 4px; margin-top: 1rem;">
                            <p style="margin: 0; font-weight: 600; color: #991b1b;">何が問題？</p>
                            <ul style="margin: 0.5rem 0 0 1.5rem; color: #7f1d1d; font-size: 0.9em;">
                                <li><strong>不正な値をチェックできない</strong> - 空文字、null、マイナス値などがそのまま入る</li>
                                <li><strong>予期しないバグが発生</strong> - 後でnullを参照してエラーになる</li>
                                <li><strong>データの整合性が保てない</strong> - どこからでも勝手に書き換えられる</li>
                            </ul>
                        </div>
                    </div>

                    <div style="background: linear-gradient(135deg, #f0fdf4, #dcfce7); border: 2px solid #22c55e; border-radius: 10px; padding: 1.5rem; margin: 1.5rem 0;">
                        <p style="margin: 0 0 1rem 0; font-weight: 600; color: #166534; font-size: 1em;">
                            ✅ 良い例：<code>private</code> + Getter/Setterを使った場合
                        </p>
                        <div class="code-block" style="margin: 0;">
                            <div class="code-content">
                                <pre><span class="code-keyword">public class</span> <span class="code-type">User</span> {
    <span class="code-keyword">private</span> <span class="code-type">String</span> name;    <span class="code-comment">// 外部から直接アクセス不可</span>
    <span class="code-keyword">private</span> <span class="code-type">Integer</span> age;   <span class="code-comment">// 外部から直接アクセス不可</span>

    <span class="code-comment">// Setter（値を設定）- 不正な値をチェックできる</span>
    <span class="code-keyword">public void</span> setName(<span class="code-type">String</span> name) {
        <span class="code-keyword">if</span> (name != <span class="code-keyword">null</span> && !name.isEmpty()) {
            <span class="code-keyword">this</span>.name = name;
        } <span class="code-keyword">else</span> {
            <span class="code-keyword">throw new</span> <span class="code-type">IllegalArgumentException</span>(<span class="code-string">"名前は空にできません"</span>);
        }
    }

    <span class="code-comment">// Getter（値を取得）</span>
    <span class="code-keyword">public</span> <span class="code-type">String</span> getName() {
        <span class="code-keyword">return</span> name;
    }
}

<span class="code-comment">// 外部のコードから...</span>
<span class="code-type">User</span> user = <span class="code-keyword">new</span> <span class="code-type">User</span>();
user.setName(<span class="code-string">"田中"</span>);      <span class="code-comment">// OK：正常な値</span>
user.setName(<span class="code-string">""</span>);         <span class="code-comment">// エラー：空文字は拒否される！</span>
user.setName(<span class="code-keyword">null</span>);      <span class="code-comment">// エラー：nullは拒否される！</span></pre>
                            </div>
                        </div>
                        <div style="background: #f0fdf4; border-left: 4px solid #22c55e; padding: 1rem; border-radius: 4px; margin-top: 1rem;">
                            <p style="margin: 0; font-weight: 600; color: #166534;">メリット</p>
                            <ul style="margin: 0.5rem 0 0 1.5rem; color: #14532d; font-size: 0.9em;">
                                <li><strong>値のチェック（バリデーション）ができる</strong> - Setter内で不正な値を拒否</li>
                                <li><strong>安全性が高い</strong> - privateなので外部から直接書き換えられない</li>
                                <li><strong>メンテナンスしやすい</strong> - ルール変更時はSetter/Getterだけ修正すればOK</li>
                            </ul>
                        </div>
                    </div>

                    <div class="highlight-box info">
                        <p style="margin: 0; line-height: 1.8;">
                            <strong>💡 カプセル化とは？</strong><br>
                            このように、<strong>フィールドを<code>private</code>にして外部から隠し、Getter/Setterメソッドを経由してアクセスする仕組み</strong>を<strong>「カプセル化」</strong>といいます。<br><br>
                            カプセル化により、<strong>データの保護</strong>と<strong>制御</strong>が可能になり、プログラムの安全性と保守性が向上します。
                        </p>
                    </div>

                    <div class="diagram">
                        <svg width="650" height="320" viewBox="0 0 650 320">
                            <!-- Title -->
                            <text x="325" y="25" text-anchor="middle" font-family="Noto Sans JP" font-size="12" fill="#475569" font-weight="600">Getter・Setterによるデータの流れ</text>

                            <!-- External Code (Left) -->
                            <rect x="20" y="50" width="150" height="250" rx="10" fill="#f0f9ff" stroke="#0ea5e9" stroke-width="2" />
                            <text x="95" y="75" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#0284c7" font-weight="600">外部のコード</text>
                            <text x="95" y="92" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#64748b">（他のクラスなど）</text>

                            <!-- Set value -->
                            <rect x="35" y="110" width="120" height="50" rx="6" fill="white" stroke="#f97316" stroke-width="1.5" />
                            <text x="95" y="132" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#c2410c" font-weight="500">値を設定したい</text>
                            <text x="95" y="150" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#475569">"田中"</text>

                            <!-- Get value -->
                            <rect x="35" y="230" width="120" height="50" rx="6" fill="white" stroke="#22c55e" stroke-width="1.5" />
                            <text x="95" y="252" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#16a34a" font-weight="500">値を取得したい</text>
                            <text x="95" y="270" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#475569">name = ?</text>

                            <!-- Class (Center) -->
                            <rect x="240" y="50" width="170" height="250" rx="10" fill="#fefce8" stroke="#eab308" stroke-width="2" />
                            <rect x="240" y="50" width="170" height="35" rx="10" fill="#eab308" />
                            <rect x="240" y="75" width="170" height="10" fill="#eab308" />
                            <text x="325" y="73" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="white" font-weight="600">Userクラス</text>

                            <!-- Setter method -->
                            <rect x="255" y="100" width="140" height="55" rx="6" fill="#fff7ed" stroke="#f97316" stroke-width="2" />
                            <text x="325" y="120" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#c2410c" font-weight="600">Setter</text>
                            <text x="325" y="138" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#475569">setName(String)</text>
                            <text x="325" y="150" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#94a3b8">値を受け取り格納</text>

                            <!-- Private field -->
                            <rect x="255" y="165" width="140" height="45" rx="6" fill="#1e293b" stroke="#475569" stroke-width="2" />
                            <text x="325" y="183" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#fbbf24">private</text>
                            <text x="325" y="200" text-anchor="middle" font-family="JetBrains Mono" font-size="10" fill="#4ade80">String name</text>

                            <!-- Getter method -->
                            <rect x="255" y="220" width="140" height="55" rx="6" fill="#f0fdf4" stroke="#22c55e" stroke-width="2" />
                            <text x="325" y="240" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#16a34a" font-weight="600">Getter</text>
                            <text x="325" y="258" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#475569">getName()</text>
                            <text x="325" y="270" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#94a3b8">値を返す</text>

                            <!-- Arrows -->
                            <defs>
                                <marker id="arrowOrangeLombok" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                                    <polygon points="0 0, 8 3, 0 6" fill="#f97316" />
                                </marker>
                                <marker id="arrowGreenLombok" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                                    <polygon points="0 0, 8 3, 0 6" fill="#22c55e" />
                                </marker>
                                <marker id="arrowRedLombok" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                                    <polygon points="0 0, 8 3, 0 6" fill="#ef4444" />
                                </marker>
                            </defs>

                            <!-- Setter flow -->
                            <path d="M160 135 L250 127" stroke="#f97316" stroke-width="2.5" fill="none" marker-end="url(#arrowOrangeLombok)" />
                            <path d="M325 155 L325 165" stroke="#f97316" stroke-width="2" fill="none" marker-end="url(#arrowOrangeLombok)" />

                            <!-- Getter flow -->
                            <path d="M325 210 L325 220" stroke="#22c55e" stroke-width="2" fill="none" marker-end="url(#arrowGreenLombok)" />
                            <path d="M250 247 L160 255" stroke="#22c55e" stroke-width="2.5" fill="none" marker-end="url(#arrowGreenLombok)" />

                            <!-- Direct access (NG) -->
                            <rect x="480" y="50" width="150" height="120" rx="10" fill="#fef2f2" stroke="#ef4444" stroke-width="2" />
                            <text x="555" y="75" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#dc2626" font-weight="600">直接アクセス</text>
                            <text x="555" y="95" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#64748b">user.name = "田中"</text>

                            <!-- X mark -->
                            <circle cx="555" cy="130" r="20" fill="#fecaca" stroke="#ef4444" stroke-width="2" />
                            <path d="M545 120 L565 140 M565 120 L545 140" stroke="#ef4444" stroke-width="3" stroke-linecap="round" />
                            <text x="555" y="165" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#dc2626" font-weight="600">NG</text>

                            <!-- Summary -->
                            <rect x="480" y="185" width="150" height="115" rx="10" fill="#f0fdf4" stroke="#22c55e" stroke-width="2" />
                            <text x="555" y="210" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#16a34a" font-weight="600">メソッド経由</text>
                            <text x="555" y="232" text-anchor="middle" font-family="JetBrains Mono" font-size="8" fill="#64748b">user.setName("田中")</text>
                            <text x="555" y="250" text-anchor="middle" font-family="JetBrains Mono" font-size="8" fill="#64748b">user.getName()</text>

                            <!-- Check mark -->
                            <circle cx="555" cy="275" r="15" fill="#dcfce7" stroke="#22c55e" stroke-width="2" />
                            <path d="M547 275 L552 280 L563 269" stroke="#22c55e" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round" />

                            <!-- Flow labels -->
                            <rect x="175" y="115" width="60" height="20" rx="4" fill="#f97316" />
                            <text x="205" y="129" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="white" font-weight="600">① 設定</text>

                            <rect x="175" y="240" width="60" height="20" rx="4" fill="#22c55e" />
                            <text x="205" y="254" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="white" font-weight="600">② 取得</text>
                        </svg>
                        <p class="diagram-caption">図2.25 Getter・Setterによるデータアクセスの流れ</p>
                    </div>

                    <div style="margin: 1.5rem 0;">
                        <div class="sample-code-grid">
                            <div style="background: #fff7ed; border-left: 4px solid #f97316; padding: 1rem; border-radius: 0 8px 8px 0;">
                                <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #c2410c;">① Setter（値を設定）</p>
                                <ol style="margin: 0; padding-left: 1.5rem; color: #475569; font-size: 0.9em;">
                                    <li>外部から <code style="background: #fed7aa; padding: 2px 4px; border-radius: 3px;">setName("田中")</code> を呼び出す</li>
                                    <li>Setterメソッドが値を受け取る</li>
                                    <li>privateフィールドに値を格納</li>
                                </ol>
                            </div>
                            <div style="background: #f0fdf4; border-left: 4px solid #22c55e; padding: 1rem; border-radius: 0 8px 8px 0;">
                                <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #16a34a;">② Getter（値を取得）</p>
                                <ol style="margin: 0; padding-left: 1.5rem; color: #475569; font-size: 0.9em;">
                                    <li>外部から <code style="background: #bbf7d0; padding: 2px 4px; border-radius: 3px;">getName()</code> を呼び出す</li>
                                    <li>Getterメソッドがフィールドの値を読み取る</li>
                                    <li>値を呼び出し元に返す</li>
                                </ol>
                            </div>
                        </div>
                    </div>

                    <div class="highlight-box success">
                        <p style="margin: 0; line-height: 1.8;">
                            <strong>✅ カプセル化のまとめ</strong><br>
                            <strong>フィールドを<code>private</code>にして、Getter/Setterでアクセスする</strong>ことで、以下の3つのメリットが得られます：
                        </p>
                        <ul style="margin: 0.75rem 0 0 1.5rem; line-height: 1.8;">
                            <li><strong>データの保護</strong> - 外部から直接書き換えられない</li>
                            <li><strong>値のチェック</strong> - 不正な値を拒否できる</li>
                            <li><strong>柔軟な変更</strong> - 内部実装を変更しても外部に影響しない</li>
                        </ul>
                        <p style="margin: 0.75rem 0 0 0; font-size: 0.95em;">
                            この仕組みを<strong>「カプセル化」</strong>といい、オブジェクト指向プログラミングの基本原則の一つです。
                        </p>
                    </div>

                    <!-- ========== Lombokプロジェクトのセットアップ ========== -->
                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ Lombokプロジェクトのセットアップ</h4>

                    <p>
                        ここからは実際にLombokを使ったプロジェクトを作成します。Spring Initializrを使用してプロジェクトを生成し、VSCodeで開くまでの手順を説明します。
                    </p>

                    <div class="highlight-box info" style="margin: 1.5rem 0;">
                        <p style="margin: 0; line-height: 1.8;">
                            <strong>📌 セットアップの流れ</strong><br>
                            ① Spring InitializrでLombok依存関係を含むプロジェクトを生成<br>
                            ② ダウンロードしたZIPファイルを <code>c:\academia\src\spring</code> に展開<br>
                            ③ VSCodeのProject Managerでプロジェクトを設定
                        </p>
                    </div>

                    <!-- Step 1: Spring Initializr -->
                    <h5 style="margin: 1.5rem 0 1rem; font-weight: 600; color: #0ea5e9;">【STEP 1】Spring Initializrでプロジェクトを生成</h5>

                    <div style="background: #f0f9ff; border-left: 4px solid #0ea5e9; padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #0369a1;">1. Spring Initializrにアクセス</p>
                        <p style="margin: 0; font-size: 0.9em; color: #0c4a6e;">
                            ブラウザで <a href="https://start.spring.io/" target="_blank" style="color: #0ea5e9; text-decoration: underline;">https://start.spring.io/</a> を開きます。
                        </p>
                    </div>

                    <div style="background: #f0f9ff; border-left: 4px solid #0ea5e9; padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #0369a1;">2. プロジェクト設定を入力</p>
                        <table style="width: 100%; border-collapse: collapse; margin-top: 0.5rem; font-size: 0.9em;">
                            <tr style="background: #e0f2fe;">
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd; font-weight: 600;">Project</td>
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd;"><strong>Maven</strong></td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd; font-weight: 600;">Language</td>
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd;">Java</td>
                            </tr>
                            <tr style="background: #e0f2fe;">
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd; font-weight: 600;">Spring Boot</td>
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd;">3.x.x（最新の安定版）</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd; font-weight: 600;">Group</td>
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd;">com.example</td>
                            </tr>
                            <tr style="background: #e0f2fe;">
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd; font-weight: 600;">Artifact</td>
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd;"><strong>lombok-demo</strong></td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd; font-weight: 600;">Packaging</td>
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd;">Jar</td>
                            </tr>
                            <tr style="background: #e0f2fe;">
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd; font-weight: 600;">Java</td>
                                <td style="padding: 0.5rem; border: 1px solid #bae6fd;">17</td>
                            </tr>
                        </table>
                    </div>

                    <div style="background: #f0f9ff; border-left: 4px solid #0ea5e9; padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #0369a1;">3. 依存関係（Dependencies）を追加</p>
                        <p style="margin: 0 0 0.5rem 0; font-size: 0.9em; color: #0c4a6e;">
                            右側の「ADD DEPENDENCIES」ボタンをクリックし、以下を検索して追加します：
                        </p>
                        <ul style="margin: 0.5rem 0 0 1.5rem; font-size: 0.9em; color: #0c4a6e;">
                            <li><strong>Lombok</strong> - getter/setter自動生成</li>
                        </ul>
                    </div>

                    <div style="background: #f0f9ff; border-left: 4px solid #0ea5e9; padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #0369a1;">4. プロジェクトを生成</p>
                        <p style="margin: 0; font-size: 0.9em; color: #0c4a6e;">
                            画面下部の「GENERATE」ボタンをクリックすると、<code>lombok-demo.zip</code> がダウンロードされます。
                        </p>
                    </div>

                    <!-- Step 2: ファイル展開 -->
                    <h5 style="margin: 1.5rem 0 1rem; font-weight: 600; color: #0ea5e9;">【STEP 2】ダウンロードしたファイルを展開</h5>

                    <div style="background: #f0f9ff; border-left: 4px solid #0ea5e9; padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #0369a1;">1. フォルダを作成</p>
                        <p style="margin: 0 0 0.5rem 0; font-size: 0.9em; color: #0c4a6e;">
                            エクスプローラーで以下のフォルダを作成します：
                        </p>
                        <div style="background: #1e293b; color: #e2e8f0; padding: 0.75rem; border-radius: 6px; font-family: 'JetBrains Mono', monospace; font-size: 0.9em; margin: 0.5rem 0;">
                            c:\academia\src\spring
                        </div>
                    </div>

                    <div style="background: #f0f9ff; border-left: 4px solid #0ea5e9; padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #0369a1;">2. ZIPファイルを展開</p>
                        <p style="margin: 0 0 0.5rem 0; font-size: 0.9em; color: #0c4a6e;">
                            ダウンロードした <code>lombok-demo.zip</code> を <code>c:\academia\src\spring</code> に展開します。
                        </p>
                        <p style="margin: 0.5rem 0 0 0; font-size: 0.9em; color: #0c4a6e;">
                            展開後のフォルダ構成：
                        </p>
                        <div style="background: #1e293b; color: #e2e8f0; padding: 0.75rem; border-radius: 6px; font-family: 'JetBrains Mono', monospace; font-size: 0.85em; margin: 0.5rem 0; line-height: 1.6;">
c:\academia\src\spring\lombok-demo\
├── src\
│   └── main\
│       └── java\
│           └── com\
│               └── example\
│                   └── lombokdemo\
│                       └── LombokDemoApplication.java
├── pom.xml
├── mvnw
├── mvnw.cmd
└── README.md
                        </div>
                    </div>

                    <!-- Step 3: VSCode設定 -->
                    <h5 style="margin: 1.5rem 0 1rem; font-weight: 600; color: #0ea5e9;">【STEP 3】VSCodeのProject Managerで設定</h5>

                    <div style="background: #f0f9ff; border-left: 4px solid #0ea5e9; padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #0369a1;">1. プロジェクトを開く</p>
                        <ol style="margin: 0.5rem 0 0 1.5rem; font-size: 0.9em; color: #0c4a6e; line-height: 1.7;">
                            <li>VSCodeを起動</li>
                            <li>「ファイル」→「フォルダーを開く」をクリック</li>
                            <li><code>c:\academia\src\spring\lombok-demo</code> を選択</li>
                        </ol>
                    </div>

                    <div style="background: #f0f9ff; border-left: 4px solid #0ea5e9; padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #0369a1;">2. Project Managerに保存（任意）</p>
                        <p style="margin: 0 0 0.5rem 0; font-size: 0.9em; color: #0c4a6e;">
                            頻繁に使うプロジェクトは、Project Manager拡張機能で管理すると便利です：
                        </p>
                        <ol style="margin: 0.5rem 0 0 1.5rem; font-size: 0.9em; color: #0c4a6e; line-height: 1.7;">
                            <li>左サイドバーのProject Managerアイコンをクリック</li>
                            <li>「Save Project」をクリック</li>
                            <li>プロジェクト名を入力（例：lombok-demo）</li>
                        </ol>
                    </div>

                    <div style="background: #dcfce7; border: 2px solid #22c55e; border-radius: 10px; padding: 1.25rem; margin: 1.5rem 0;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #166534; font-size: 1em;">
                            ✅ セットアップ完了！
                        </p>
                        <p style="margin: 0; font-size: 0.9em; color: #14532d; line-height: 1.7;">
                            これでLombokを含むMavenプロジェクトが作成できました。<br>
                            <code>pom.xml</code>を確認すると、<code>&lt;dependencies&gt;</code>の中にLombokが含まれていることが確認できます。<br><br>
                            次のセクションでは、実際にLombokを使ってコードを書いていきます。
                        </p>
                    </div>

                    <!-- ========== Lombokの使用例 ========== -->
                    <div class="sample-code-header" style="margin-bottom: 1rem;">
                        <h4 style="margin: 0;">■ Lombokの使用例</h4>
                    </div>

                    <div style="display: flex; gap: 1rem; margin: 1rem 0; flex-wrap: wrap;">
                        <a href="downloads/chapter2-getter-setter-complete.zip" class="download-btn" download style="flex: 1; min-width: 250px;">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                            <span style="display: flex; flex-direction: column; align-items: flex-start;">
                                <strong>完全版をダウンロード</strong>
                                <small style="font-size: 0.8em; opacity: 0.8;">すべてのコードが記述済み</small>
                            </span>
                        </a>
                        <a href="downloads/chapter2-getter-setter-exercise.zip" class="download-btn" download style="flex: 1; min-width: 250px; background: linear-gradient(135deg, #f59e0b, #d97706);">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                            <span style="display: flex; flex-direction: column; align-items: flex-start;">
                                <strong>演習用をダウンロード</strong>
                                <small style="font-size: 0.8em; opacity: 0.8;">TODOコメント付き（自分で実装）</small>
                            </span>
                        </a>
                    </div>

                    <p style="margin: 1rem 0;">
                        ここからは、Setterなし/あり、Getterなし/あり、Lombokなし/ありの違いを実際のコードで比較しながら学習します。先ほど作成した<code>lombok-demo</code>プロジェクトに、各サンプル用のパッケージを追加していきます。
                    </p>

                    <div class="info-box" style="margin: 1rem 0;">
                        <p><strong>Spring Initializrで作成したプロジェクトのフォルダ構成：</strong></p>
                        <p style="margin: 0.5rem 0 0.5rem 0; font-size: 0.9em; color: #64748b;">
                            <code>c:\academia\src\spring\lombok-demo</code>プロジェクト内の<code>src/main/java/com/example/lombokdemo</code>に各サンプル用のパッケージを作成します。
                        </p>
                        <pre style="margin-top: 0.8rem; background: #f5f5f5; padding: 0.8rem; border-radius: 4px; font-size: 0.85em; line-height: 1.5;">lombok-demo/
├── src/
│   └── main/
│       └── java/
│           └── com/
│               └── example/
│                   └── lombokdemo/
│                       ├── <span style="color: #0ea5e9; font-weight: 600;">withoutsetter/</span>     ← パッケージ1: Setterなし
│                       │   ├── User.java
│                       │   └── Main.java
│                       ├── <span style="color: #0ea5e9; font-weight: 600;">withsetter/</span>        ← パッケージ2: Setterあり
│                       │   ├── User.java
│                       │   └── Main.java
│                       ├── <span style="color: #0ea5e9; font-weight: 600;">withoutgetter/</span>     ← パッケージ3: Getterなし
│                       │   ├── User.java
│                       │   └── Main.java
│                       ├── <span style="color: #0ea5e9; font-weight: 600;">withgetter/</span>        ← パッケージ4: Getterあり
│                       │   ├── User.java
│                       │   └── Main.java
│                       ├── <span style="color: #0ea5e9; font-weight: 600;">withoutlombok/</span>     ← パッケージ5: Lombokなし
│                       │   ├── User.java
│                       │   └── Main.java
│                       ├── <span style="color: #0ea5e9; font-weight: 600;">withlombok/</span>        ← パッケージ6: Lombokあり
│                       │   ├── User.java
│                       │   └── Main.java
│                       ├── <span style="color: #0ea5e9; font-weight: 600;">lombokcustom/</span>      ← パッケージ7: Lombok+カスタム
│                       │   ├── User.java
│                       │   └── Main.java
│                       └── LombokDemoApplication.java
├── pom.xml
└── ...</pre>
                    </div>

                    <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #92400e;">
                            💡 パッケージの作成方法
                        </p>
                        <ol style="margin: 0.5rem 0 0 1.5rem; font-size: 0.9em; color: #78350f; line-height: 1.7;">
                            <li>VSCodeで<code>src/main/java/com/example/lombokdemo</code>を右クリック</li>
                            <li>「New Folder」を選択</li>
                            <li>フォルダ名を入力（例：<code>withoutsetter</code>）</li>
                            <li>作成したフォルダ内に<code>User.java</code>と<code>Main.java</code>を作成</li>
                        </ol>
                    </div>

                    <p>Setterは<strong>値を設定する</strong>メソッドです。設定時にバリデーション（値のチェック）を行うことができます。</p>

                    <!-- Setter図解 -->
                    <div class="diagram-container" style="margin: 1.5rem 0;">
                        <svg viewBox="0 0 650 200" style="max-width: 650px; width: 100%;">
                            <defs>
                                <marker id="setter-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
                                </marker>
                                <marker id="setter-arrow-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#ef4444"/>
                                </marker>
                                <marker id="setter-arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
                                </marker>
                            </defs>

                            <!-- タイトル -->
                            <text x="325" y="20" text-anchor="middle" font-family="Noto Sans JP" font-size="12" fill="#475569" font-weight="600">Setterの役割：値を設定する（バリデーション付き）</text>

                            <!-- 外部（呼び出し側） -->
                            <rect x="20" y="60" width="120" height="80" rx="8" fill="#e0f2fe" stroke="#0284c7" stroke-width="2"/>
                            <text x="80" y="90" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#0369a1" font-weight="600">外部（Main）</text>
                            <text x="80" y="115" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#0284c7">user.setAge(25)</text>
                            <text x="80" y="130" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#dc2626">user.setAge(-5)</text>

                            <!-- 矢印1：外部→Setter -->
                            <line x1="140" y1="100" x2="215" y2="100" stroke="#64748b" stroke-width="2" marker-end="url(#setter-arrow)"/>
                            <text x="178" y="90" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#64748b">値を渡す</text>

                            <!-- Setter（バリデーション） -->
                            <rect x="220" y="50" width="160" height="100" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
                            <text x="300" y="75" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#b45309" font-weight="600">Setter</text>
                            <text x="300" y="95" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#92400e">setAge(int age)</text>
                            <rect x="235" y="105" width="130" height="35" rx="4" fill="#fff" stroke="#f59e0b" stroke-width="1"/>
                            <text x="300" y="120" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#92400e">バリデーション</text>
                            <text x="300" y="133" text-anchor="middle" font-family="JetBrains Mono" font-size="8" fill="#64748b">age &gt;= 0 &amp;&amp; age &lt;= 150</text>

                            <!-- 分岐：OK -->
                            <line x1="380" y1="80" x2="455" y2="80" stroke="#22c55e" stroke-width="2" marker-end="url(#setter-arrow-green)"/>
                            <text x="418" y="70" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#22c55e" font-weight="600">OK</text>

                            <!-- 分岐：NG -->
                            <line x1="380" y1="120" x2="455" y2="160" stroke="#ef4444" stroke-width="2" marker-end="url(#setter-arrow-red)"/>
                            <text x="430" y="135" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#ef4444" font-weight="600">NG</text>

                            <!-- フィールド -->
                            <rect x="460" y="50" width="120" height="60" rx="8" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
                            <text x="520" y="75" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#166534" font-weight="600">フィールド</text>
                            <text x="520" y="95" text-anchor="middle" font-family="JetBrains Mono" font-size="10" fill="#22c55e">age = 25</text>

                            <!-- 拒否 -->
                            <rect x="460" y="140" width="120" height="40" rx="8" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
                            <text x="520" y="165" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#dc2626" font-weight="600">設定されない</text>
                        </svg>
                        <p class="diagram-caption">図2.26 Setterの動作：バリデーションで不正な値を拒否</p>
                    </div>

                    <div style="background: #fffbeb; border: 1px solid #fcd34d; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;">
                        <p style="margin: 0; font-size: 0.9em; color: #92400e;">
                            <strong>解説：</strong>Setterは外部から値を受け取り、<strong>バリデーション（値のチェック）</strong>を行います。<br>
                            正常な値（25歳）は設定され、不正な値（-5歳）は拒否されます。これにより、データの整合性を保つことができます。
                        </p>
                    </div>

                    <!-- Setterを使わない場合 -->
                    <p style="margin: 1rem 0 0.5rem; font-weight: 600; color: #dc2626;">▼ Setterを使わない場合</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">src/main/java/com/example/lombokdemo/withoutsetter/User.java</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.lombokdemo.withoutsetter;

<span class="code-keyword">public class</span> <span class="code-type">User</span> {
    <span class="code-keyword">public</span> <span class="code-type">String</span> name;  <span class="code-comment">// publicなので外部から直接アクセス可能</span>
    <span class="code-keyword">public int</span> age;
}</pre>
                        </div>
                    </div>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">src/main/java/com/example/lombokdemo/withoutsetter/Main.java</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.lombokdemo.withoutsetter;

<span class="code-keyword">public class</span> <span class="code-type">Main</span> {
    <span class="code-keyword">public static void</span> <span class="code-method">main</span>(<span class="code-type">String</span>[] args) {
        <span class="code-type">User</span> user = <span class="code-keyword">new</span> <span class="code-type">User</span>();
        user.name = <span class="code-string">"田中太郎"</span>;  <span class="code-comment">// 直接代入</span>
        user.age = <span class="code-number">25</span>;
        System.out.println(<span class="code-string">"名前: "</span> + user.name + <span class="code-string">", 年齢: "</span> + user.age);

        <span class="code-comment">// 問題：不正な値もそのまま設定されてしまう</span>
        user.name = <span class="code-string">""</span>;     <span class="code-comment">// 空文字もOK</span>
        user.age = <span class="code-number">-5</span>;     <span class="code-comment">// 負の値もOK ← バグの原因になる</span>
        System.out.println(<span class="code-string">"名前: "</span> + user.name + <span class="code-string">", 年齢: "</span> + user.age);
    }
}</pre>
                        </div>
                    </div>
                    <div class="execution-result">
                        <div class="execution-result-header">実行結果</div>
                        <div class="execution-result-content">
<pre>名前: 田中太郎, 年齢: 25
名前: , 年齢: -5</pre>
                        </div>
                    </div>

                    <!-- Setterを使う場合 -->
                    <p style="margin: 1rem 0 0.5rem; font-weight: 600; color: #16a34a;">▼ Setterを使う場合</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">src/main/java/com/example/lombokdemo/withsetter/User.java</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.lombokdemo.withsetter;

<span class="code-keyword">public class</span> <span class="code-type">User</span> {
    <span class="code-keyword">private</span> <span class="code-type">String</span> name;  <span class="code-comment">// privateなので外部から直接アクセス不可</span>
    <span class="code-keyword">private int</span> age;

    <span class="code-keyword">public</span> <span class="code-type">String</span> <span class="code-method">getName</span>() { <span class="code-keyword">return</span> name; }
    <span class="code-keyword">public int</span> <span class="code-method">getAge</span>() { <span class="code-keyword">return</span> age; }

    <span class="code-keyword">public void</span> <span class="code-method">setName</span>(<span class="code-type">String</span> name) {
        <span class="code-keyword">if</span> (name != <span class="code-keyword">null</span> &amp;&amp; !name.isEmpty()) {
            <span class="code-keyword">this</span>.name = name;
        }
    }

    <span class="code-keyword">public void</span> <span class="code-method">setAge</span>(<span class="code-keyword">int</span> age) {
        <span class="code-keyword">if</span> (age &gt;= <span class="code-number">0</span> &amp;&amp; age &lt;= <span class="code-number">150</span>) {
            <span class="code-keyword">this</span>.age = age;
        }
    }
}</pre>
                        </div>
                    </div>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">src/main/java/com/example/lombokdemo/withsetter/Main.java</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.lombokdemo.withsetter;

<span class="code-keyword">public class</span> <span class="code-type">Main</span> {
    <span class="code-keyword">public static void</span> <span class="code-method">main</span>(<span class="code-type">String</span>[] args) {
        <span class="code-type">User</span> user = <span class="code-keyword">new</span> <span class="code-type">User</span>();
        user.setName(<span class="code-string">"田中太郎"</span>);  <span class="code-comment">// OK</span>
        user.setAge(<span class="code-number">25</span>);           <span class="code-comment">// OK</span>
        System.out.println(<span class="code-string">"名前: "</span> + user.getName() + <span class="code-string">", 年齢: "</span> + user.getAge());

        <span class="code-comment">// 不正な値は設定されない（バリデーションで拒否）</span>
        user.setName(<span class="code-string">""</span>);   <span class="code-comment">// 無視される</span>
        user.setAge(<span class="code-number">-5</span>);   <span class="code-comment">// 無視される ← データが保護される</span>
        System.out.println(<span class="code-string">"名前: "</span> + user.getName() + <span class="code-string">", 年齢: "</span> + user.getAge());
    }
}</pre>
                        </div>
                    </div>
                    <div class="execution-result">
                        <div class="execution-result-header">実行結果</div>
                        <div class="execution-result-content">
<pre>名前: 田中太郎, 年齢: 25
名前: 田中太郎, 年齢: 25</pre>
                        </div>
                    </div>

                    <div class="highlight-box">
                        <p>
                            <strong>📌 Setterのポイント</strong><br>
                            Setterを使うと、値を設定する前に<strong>バリデーション（値のチェック）</strong>ができます。<br>
                            不正な値（null、空文字、範囲外の数値など）を拒否して、データの整合性を保つことができます。
                        </p>
                    </div>

                    <!-- ========== Getterの役割と活用例 ========== -->
                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ Getterの役割と活用例</h4>
                    <p>Getterは<strong>値を取得する</strong>メソッドです。単純に値を返すだけでなく、加工した値を返すこともできます。</p>

                    <!-- Getter図解 -->
                    <div class="diagram-container" style="margin: 1.5rem 0;">
                        <svg viewBox="0 0 650 180" style="max-width: 650px; width: 100%;">
                            <defs>
                                <marker id="getter-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
                                </marker>
                                <marker id="getter-arrow-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
                                </marker>
                            </defs>

                            <!-- タイトル -->
                            <text x="325" y="20" text-anchor="middle" font-family="Noto Sans JP" font-size="12" fill="#475569" font-weight="600">Getterの役割：値を取得する（加工して返すことも可能）</text>

                            <!-- フィールド -->
                            <rect x="20" y="50" width="140" height="100" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="90" y="75" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#1d4ed8" font-weight="600">フィールド（private）</text>
                            <text x="90" y="100" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#3b82f6">lastName = "田中"</text>
                            <text x="90" y="120" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#3b82f6">firstName = "太郎"</text>
                            <rect x="35" y="130" width="110" height="15" rx="3" fill="#bfdbfe"/>
                            <text x="90" y="141" text-anchor="middle" font-family="Noto Sans JP" font-size="8" fill="#1e40af">外部から直接アクセス不可</text>

                            <!-- 矢印1：フィールド→Getter -->
                            <line x1="160" y1="100" x2="215" y2="100" stroke="#64748b" stroke-width="2" marker-end="url(#getter-arrow)"/>
                            <text x="188" y="90" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#64748b">参照</text>

                            <!-- Getter（加工処理） -->
                            <rect x="220" y="50" width="180" height="100" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="2"/>
                            <text x="310" y="75" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#166534" font-weight="600">Getter</text>
                            <text x="310" y="95" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#22c55e">getFullName()</text>
                            <rect x="235" y="105" width="150" height="35" rx="4" fill="#fff" stroke="#22c55e" stroke-width="1"/>
                            <text x="310" y="120" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#166534">加工処理</text>
                            <text x="310" y="133" text-anchor="middle" font-family="JetBrains Mono" font-size="8" fill="#64748b">lastName + " " + firstName</text>

                            <!-- 矢印2：Getter→外部 -->
                            <line x1="400" y1="100" x2="455" y2="100" stroke="#3b82f6" stroke-width="2" marker-end="url(#getter-arrow-blue)"/>
                            <text x="428" y="90" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#3b82f6">返す</text>

                            <!-- 外部（呼び出し側） -->
                            <rect x="460" y="50" width="160" height="100" rx="8" fill="#e0f2fe" stroke="#0284c7" stroke-width="2"/>
                            <text x="540" y="75" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#0369a1" font-weight="600">外部（Main）</text>
                            <text x="540" y="100" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#0284c7">user.getFullName()</text>
                            <rect x="475" y="115" width="130" height="25" rx="4" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
                            <text x="540" y="132" text-anchor="middle" font-family="JetBrains Mono" font-size="10" fill="#166534" font-weight="600">"田中 太郎"</text>
                        </svg>
                        <p class="diagram-caption">図2.27 Getterの動作：フィールドの値を加工して返す</p>
                    </div>

                    <div style="background: #f0fdf4; border: 1px solid #86efac; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;">
                        <p style="margin: 0; font-size: 0.9em; color: #166534;">
                            <strong>解説：</strong>Getterはフィールドの値を取得し、<strong>加工した値を返す</strong>ことができます。<br>
                            <code style="background: #dcfce7; padding: 2px 6px; border-radius: 4px;">getFullName()</code>は姓と名を結合して返すので、呼び出し側は1行で氏名を取得できます。
                        </p>
                    </div>

                    <!-- Getterを使わない場合 -->
                    <p style="margin: 1rem 0 0.5rem; font-weight: 600; color: #dc2626;">▼ Getterを使わない場合</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">src/main/java/com/example/lombokdemo/withoutgetter/User.java</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.lombokdemo.withoutgetter;

<span class="code-keyword">public class</span> <span class="code-type">User</span> {
    <span class="code-keyword">public</span> <span class="code-type">String</span> lastName;   <span class="code-comment">// publicなので外部から直接アクセス可能</span>
    <span class="code-keyword">public</span> <span class="code-type">String</span> firstName;
}</pre>
                        </div>
                    </div>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">src/main/java/com/example/lombokdemo/withoutgetter/Main.java</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.lombokdemo.withoutgetter;

<span class="code-keyword">public class</span> <span class="code-type">Main</span> {
    <span class="code-keyword">public static void</span> <span class="code-method">main</span>(<span class="code-type">String</span>[] args) {
        <span class="code-type">User</span> user = <span class="code-keyword">new</span> <span class="code-type">User</span>();
        user.lastName = <span class="code-string">"田中"</span>;
        user.firstName = <span class="code-string">"太郎"</span>;

        <span class="code-comment">// 問題：フルネームを取得するたびに結合処理を書く必要がある</span>
        <span class="code-type">String</span> fullName1 = user.lastName + <span class="code-string">" "</span> + user.firstName;
        System.out.println(fullName1);

        <span class="code-comment">// 別の場所でも同じ処理を書く必要がある（コードの重複）</span>
        <span class="code-type">String</span> fullName2 = user.lastName + <span class="code-string">" "</span> + user.firstName;
        System.out.println(fullName2);
    }
}</pre>
                        </div>
                    </div>
                    <div class="execution-result">
                        <div class="execution-result-header">実行結果</div>
                        <div class="execution-result-content">
<pre>田中 太郎
田中 太郎</pre>
                        </div>
                    </div>

                    <!-- Getterを使う場合 -->
                    <p style="margin: 1rem 0 0.5rem; font-weight: 600; color: #16a34a;">▼ Getterを使う場合</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">src/main/java/com/example/lombokdemo/withgetter/User.java</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.lombokdemo.withgetter;

<span class="code-keyword">public class</span> <span class="code-type">User</span> {
    <span class="code-keyword">private</span> <span class="code-type">String</span> lastName;   <span class="code-comment">// privateなので外部から直接アクセス不可</span>
    <span class="code-keyword">private</span> <span class="code-type">String</span> firstName;

    <span class="code-keyword">public</span> <span class="code-method">User</span>(<span class="code-type">String</span> lastName, <span class="code-type">String</span> firstName) {
        <span class="code-keyword">this</span>.lastName = lastName;
        <span class="code-keyword">this</span>.firstName = firstName;
    }

    <span class="code-keyword">public</span> <span class="code-type">String</span> <span class="code-method">getLastName</span>() { <span class="code-keyword">return</span> lastName; }
    <span class="code-keyword">public</span> <span class="code-type">String</span> <span class="code-method">getFirstName</span>() { <span class="code-keyword">return</span> firstName; }

    <span class="code-comment">// 加工した値を返すGetter</span>
    <span class="code-keyword">public</span> <span class="code-type">String</span> <span class="code-method">getFullName</span>() {
        <span class="code-keyword">return</span> lastName + <span class="code-string">" "</span> + firstName;
    }
}</pre>
                        </div>
                    </div>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">src/main/java/com/example/lombokdemo/withgetter/Main.java</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.lombokdemo.withgetter;

<span class="code-keyword">public class</span> <span class="code-type">Main</span> {
    <span class="code-keyword">public static void</span> <span class="code-method">main</span>(<span class="code-type">String</span>[] args) {
        <span class="code-type">User</span> user = <span class="code-keyword">new</span> <span class="code-type">User</span>(<span class="code-string">"田中"</span>, <span class="code-string">"太郎"</span>);

        <span class="code-comment">// Getterを呼ぶだけでフルネームを取得できる</span>
        System.out.println(user.getFullName());

        <span class="code-comment">// どこでも同じメソッドを呼ぶだけ（コードの重複なし）</span>
        System.out.println(user.getFullName());
    }
}</pre>
                        </div>
                    </div>
                    <div class="execution-result">
                        <div class="execution-result-header">実行結果</div>
                        <div class="execution-result-content">
<pre>田中 太郎
田中 太郎</pre>
                        </div>
                    </div>

                    <div class="highlight-box">
                        <p>
                            <strong>📌 Getterのポイント</strong><br>
                            Getterを使うと、<strong>加工した値を返す</strong>ことができます。<br>
                            <code>getFullName()</code>のように処理を1箇所にまとめることで、コードの重複を防ぎ、変更にも強くなります。
                        </p>
                    </div>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ Lombokを使わない場合 vs 使う場合</h4>

                    <p>Getter・Setterを手動で書く場合と、Lombokを使う場合を比較してみましょう。</p>

                    <!-- 比較図解 -->
                    <div class="diagram-container" style="margin: 1.5rem 0;">
                        <svg viewBox="0 0 650 120" style="max-width: 650px; width: 100%;">
                            <defs>
                                <marker id="lombok-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
                                </marker>
                            </defs>

                            <!-- Lombokなし -->
                            <rect x="20" y="20" width="200" height="80" rx="8" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>
                            <text x="120" y="45" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#dc2626" font-weight="600">Lombokを使わない場合</text>
                            <text x="120" y="65" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#7f1d1d">フィールド2つで</text>
                            <text x="120" y="85" text-anchor="middle" font-family="Noto Sans JP" font-size="14" fill="#dc2626" font-weight="700">約25行</text>

                            <!-- 矢印 -->
                            <line x1="230" y1="60" x2="300" y2="60" stroke="#22c55e" stroke-width="3" marker-end="url(#lombok-arrow)"/>
                            <text x="265" y="50" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#22c55e" font-weight="600">Lombok</text>

                            <!-- Lombokあり -->
                            <rect x="310" y="20" width="200" height="80" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="2"/>
                            <text x="410" y="45" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#16a34a" font-weight="600">Lombokを使う場合</text>
                            <text x="410" y="65" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#14532d">フィールド2つで</text>
                            <text x="410" y="85" text-anchor="middle" font-family="Noto Sans JP" font-size="14" fill="#22c55e" font-weight="700">約8行</text>

                            <!-- 削減率 -->
                            <rect x="530" y="30" width="100" height="60" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="580" y="55" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#1d4ed8">コード削減</text>
                            <text x="580" y="78" text-anchor="middle" font-family="Noto Sans JP" font-size="16" fill="#2563eb" font-weight="700">約70%</text>
                        </svg>
                        <p class="diagram-caption">図2.28 Lombokによるコード削減効果</p>
                    </div>

                    <!-- Lombokを使わない場合 -->
                    <p style="margin: 1rem 0 0.5rem; font-weight: 600; color: #dc2626;">▼ Lombokを使わない場合（従来の書き方）</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">src/main/java/com/example/lombokdemo/withoutlombok/User.java</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.lombokdemo.withoutlombok;

<span class="code-keyword">public class</span> <span class="code-type">User</span> {
    <span class="code-keyword">private</span> <span class="code-type">String</span> name;
    <span class="code-keyword">private int</span> age;

    <span class="code-comment">// Getter: nameの値を取得</span>
    <span class="code-keyword">public</span> <span class="code-type">String</span> <span class="code-method">getName</span>() {
        <span class="code-keyword">return</span> name;
    }

    <span class="code-comment">// Setter: nameに値を設定</span>
    <span class="code-keyword">public void</span> <span class="code-method">setName</span>(<span class="code-type">String</span> name) {
        <span class="code-keyword">this</span>.name = name;
    }

    <span class="code-comment">// Getter: ageの値を取得</span>
    <span class="code-keyword">public int</span> <span class="code-method">getAge</span>() {
        <span class="code-keyword">return</span> age;
    }

    <span class="code-comment">// Setter: ageに値を設定</span>
    <span class="code-keyword">public void</span> <span class="code-method">setAge</span>(<span class="code-keyword">int</span> age) {
        <span class="code-keyword">this</span>.age = age;
    }
}</pre>
                        </div>
                    </div>

                    <div style="background: #fef2f2; border-left: 4px solid #ef4444; padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;">
                        <p style="margin: 0; color: #991b1b; font-size: 0.9em;">
                            <strong>問題点：</strong>フィールドが2つだけでも約25行のコードが必要。フィールドが増えるほど、同じパターンのコードを繰り返し書くことになり、ミスも発生しやすくなります。
                        </p>
                    </div>

                    <!-- Lombokを使う場合 -->
                    <p style="margin: 1rem 0 0.5rem; font-weight: 600; color: #16a34a;">▼ Lombokを使う場合（@Getter &amp; @Setter）</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">src/main/java/com/example/lombokdemo/withlombok/User.java</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.lombokdemo.withlombok;

<span class="code-keyword">import</span> lombok.Getter;
<span class="code-keyword">import</span> lombok.Setter;

<span class="code-annotation">@Getter</span>
<span class="code-annotation">@Setter</span>
<span class="code-keyword">public class</span> <span class="code-type">User</span> {
    <span class="code-keyword">private</span> <span class="code-type">String</span> name;
    <span class="code-keyword">private int</span> age;
}</pre>
                        </div>
                    </div>

                    <div style="background: #f0fdf4; border-left: 4px solid #22c55e; padding: 1rem; border-radius: 0 8px 8px 0; margin: 1rem 0;">
                        <p style="margin: 0; color: #166534; font-size: 0.9em;">
                            <strong>メリット：</strong><code style="background: #dcfce7; padding: 2px 6px; border-radius: 4px;">@Getter</code>と<code style="background: #dcfce7; padding: 2px 6px; border-radius: 4px;">@Setter</code>を付けるだけで、<code>getName()</code>、<code>setName()</code>、<code>getAge()</code>、<code>setAge()</code>が<strong>自動生成</strong>されます。
                        </p>
                    </div>

                    <!-- 呼び出し側は同じ -->
                    <p style="margin: 1rem 0 0.5rem; font-size: 0.9em; color: #64748b;">
                        <strong>Main.javaの内容（両方で共通）</strong><br>
                        withoutlombokパッケージとwithlombokパッケージのそれぞれに、以下のMain.javaを作成します。<br>
                        ※ package宣言のみが異なります
                    </p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">Main.java（内容は両方同じ - package宣言のみ変更）</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-comment">// withoutlombokの場合</span>
<span class="code-keyword">package</span> com.example.lombokdemo.withoutlombok;
<span class="code-comment">// withlombokの場合</span>
<span class="code-comment">// package com.example.lombokdemo.withlombok;</span>

<span class="code-keyword">public class</span> <span class="code-type">Main</span> {
    <span class="code-keyword">public static void</span> <span class="code-method">main</span>(<span class="code-type">String</span>[] args) {
        <span class="code-type">User</span> user = <span class="code-keyword">new</span> <span class="code-type">User</span>();

        <span class="code-comment">// Lombokあり・なしに関わらず、使い方は同じ</span>
        user.setName(<span class="code-string">"田中太郎"</span>);
        user.setAge(<span class="code-number">25</span>);

        System.out.println(user.getName());  <span class="code-comment">// 田中太郎</span>
        System.out.println(user.getAge());   <span class="code-comment">// 25</span>
    }
}</pre>
                        </div>
                    </div>
                    <div class="execution-result">
                        <div class="execution-result-header">実行結果</div>
                        <div class="execution-result-content">
<pre>田中太郎
25</pre>
                        </div>
                    </div>

                    <div class="highlight-box">
                        <p>
                            <strong>📌 ポイント</strong><br>
                            Lombokを使うとクラスの定義が簡潔になりますが、<strong>呼び出し側（Main.java）のコードは全く変わりません</strong>。<br>
                            Lombokはコンパイル時にGetter・Setterを自動生成するため、実行時の動作は手動で書いた場合と同じです。
                        </p>
                    </div>

                    <!-- カスタムSetter/Getter -->
                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ Lombokとカスタムメソッドの併用</h4>
                    <p>Lombokを使いながら、特定のフィールドだけ<strong>バリデーション付きSetter</strong>や<strong>加工付きGetter</strong>を追加することもできます。</p>

                    <!-- 優先順位の説明 -->
                    <div style="background: #fffbeb; border: 2px solid #fcd34d; border-radius: 8px; padding: 1rem; margin: 1rem 0;">
                        <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #b45309;">
                            💡 Lombokの自動生成より優先される仕組み
                        </p>
                        <p style="margin: 0; font-size: 0.9em; color: #92400e;">
                            Lombokは<strong>同名のメソッドが既に存在する場合、自動生成をスキップ</strong>します。<br>
                            そのため、<code style="background: #fef3c7; padding: 2px 6px; border-radius: 4px;">setAge()</code>を手動で定義すると、Lombokは<code style="background: #fef3c7; padding: 2px 6px; border-radius: 4px;">setAge()</code>を生成せず、手動で書いたメソッドが使われます。
                        </p>
                    </div>

                    <!-- 図解 -->
                    <div class="diagram-container" style="margin: 1.5rem 0;">
                        <svg viewBox="0 0 600 140" style="max-width: 600px; width: 100%;">
                            <!-- タイトル -->
                            <text x="300" y="18" text-anchor="middle" font-family="Noto Sans JP" font-size="11" fill="#475569" font-weight="600">Lombokとカスタムメソッドの優先順位</text>

                            <!-- lastName / firstName -->
                            <rect x="20" y="35" width="170" height="90" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="2"/>
                            <text x="105" y="55" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#166534" font-weight="600">lastName, firstName</text>
                            <text x="105" y="75" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#166534">カスタムメソッドなし</text>
                            <text x="105" y="95" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#64748b">↓</text>
                            <text x="105" y="115" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#22c55e" font-weight="600">Lombokが自動生成</text>

                            <!-- age -->
                            <rect x="215" y="35" width="170" height="90" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
                            <text x="300" y="55" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#b45309" font-weight="600">age（Setter）</text>
                            <text x="300" y="75" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#b45309">カスタムSetterあり</text>
                            <text x="300" y="95" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#64748b">↓</text>
                            <text x="300" y="115" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#f59e0b" font-weight="600">カスタムが優先</text>

                            <!-- fullName -->
                            <rect x="410" y="35" width="170" height="90" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                            <text x="495" y="55" text-anchor="middle" font-family="Noto Sans JP" font-size="10" fill="#1d4ed8" font-weight="600">fullName（Getter）</text>
                            <text x="495" y="75" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#1d4ed8">フィールドなし</text>
                            <text x="495" y="95" text-anchor="middle" font-family="Noto Sans JP" font-size="9" fill="#64748b">↓</text>
                            <text x="495" y="115" text-anchor="middle" font-family="JetBrains Mono" font-size="9" fill="#3b82f6" font-weight="600">新規メソッド追加</text>
                        </svg>
                        <p class="diagram-caption">図2.29 Lombokとカスタムメソッドの関係</p>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">src/main/java/com/example/lombokdemo/lombokcustom/User.java</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.lombokdemo.lombokcustom;

<span class="code-keyword">import</span> lombok.Getter;
<span class="code-keyword">import</span> lombok.Setter;

<span class="code-annotation">@Getter</span>
<span class="code-annotation">@Setter</span>
<span class="code-keyword">public class</span> <span class="code-type">User</span> {
    <span class="code-keyword">private</span> <span class="code-type">String</span> lastName;
    <span class="code-keyword">private</span> <span class="code-type">String</span> firstName;
    <span class="code-keyword">private int</span> age;

    <span class="code-comment">// ========================================</span>
    <span class="code-comment">// カスタムSetter：バリデーション付き</span>
    <span class="code-comment">// ========================================</span>
    <span class="code-comment">// Lombokの自動生成より優先される</span>
    <span class="code-keyword">public void</span> <span class="code-method">setAge</span>(<span class="code-keyword">int</span> age) {
        <span class="code-keyword">if</span> (age &gt;= <span class="code-number">0</span> &amp;&amp; age &lt;= <span class="code-number">150</span>) {
            <span class="code-keyword">this</span>.age = age;
        }
    }

    <span class="code-comment">// ========================================</span>
    <span class="code-comment">// カスタムGetter：加工した値を返す</span>
    <span class="code-comment">// ========================================</span>
    <span class="code-comment">// 新しいメソッドを追加</span>
    <span class="code-keyword">public</span> <span class="code-type">String</span> <span class="code-method">getFullName</span>() {
        <span class="code-keyword">return</span> lastName + <span class="code-string">" "</span> + firstName;
    }
}</pre>
                        </div>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">src/main/java/com/example/lombokdemo/lombokcustom/Main.java</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.lombokdemo.lombokcustom;

<span class="code-keyword">public class</span> <span class="code-type">Main</span> {
    <span class="code-keyword">public static void</span> <span class="code-method">main</span>(<span class="code-type">String</span>[] args) {
        <span class="code-type">User</span> user = <span class="code-keyword">new</span> <span class="code-type">User</span>();

        <span class="code-comment">// Lombokが自動生成したSetter</span>
        user.setLastName(<span class="code-string">"田中"</span>);
        user.setFirstName(<span class="code-string">"太郎"</span>);

        <span class="code-comment">// カスタムSetter（バリデーション付き）</span>
        user.setAge(<span class="code-number">25</span>);    <span class="code-comment">// OK：設定される</span>
        user.setAge(<span class="code-number">-5</span>);    <span class="code-comment">// NG：無視される</span>

        <span class="code-comment">// Lombokが自動生成したGetter</span>
        System.out.println(user.getLastName());   <span class="code-comment">// 田中</span>
        System.out.println(user.getAge());        <span class="code-comment">// 25</span>

        <span class="code-comment">// カスタムGetter（加工した値を返す）</span>
        System.out.println(user.getFullName());   <span class="code-comment">// 田中 太郎</span>
    }
}</pre>
                        </div>
                    </div>
                    <div class="execution-result">
                        <div class="execution-result-header">実行結果</div>
                        <div class="execution-result-content">
<pre>田中
25
田中 太郎</pre>
                        </div>
                    </div>

                    <div class="highlight-box">
                        <p>
                            <strong>📌 ポイント</strong><br>
                            <strong>カスタムSetter</strong>：同じ名前のメソッドを定義すると、Lombokの自動生成より優先されます。<br>
                            <strong>カスタムGetter</strong>：<code>getFullName()</code>のように新しいメソッドを自由に追加できます。<br>
                            <span style="color: #64748b;">※ lastName、firstNameは@Getter/@Setterで自動生成、ageのSetterだけカスタム</span>
                        </p>
                    </div>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">■ @Dataの使用</h4>
                    <p>
                        Lombokのアノテーション「@Data」を記述することで、上記のコードは、ゲッター、セッター、equals(),
                        hashCode(), toString()というメソッドが自動的に作成されます。
                    </p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">User.java - @Data</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.demo.entity;

<span class="code-keyword">import</span> lombok.Data;

<span class="code-annotation">@Data</span>
<span class="code-keyword">public class</span> <span class="code-type">User</span> {
    <span class="code-comment">/** 名前 */</span>
    <span class="code-keyword">private</span> <span class="code-type">String</span> name;
    <span class="code-comment">/** 年齢 */</span>
    <span class="code-keyword">private int</span> age;
}</pre>
                        </div>
                    </div>

                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>メソッド</th>
                                <th>概要</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>equals()</code></td>
                                <td>2つのオブジェクトが等しいかどうかを判断するためのメソッド</td>
                            </tr>
                            <tr>
                                <td><code>hashCode()</code></td>
                                <td>オブジェクトのハッシュコード（整数値）を返すメソッド</td>
                            </tr>
                            <tr>
                                <td><code>toString()</code></td>
                                <td>オブジェクトの文字列表現を返すメソッド</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4 style="margin: 1.5rem 0 1rem; font-weight: 600">
                        ■ @AllArgsConstructor &amp; @NoArgsConstructorの使用
                    </h4>
                    <p>
                        Lombokのアノテーション「@AllArgsConstructor」は、クラスのすべてのフィールドを引数として持つコンストラクタを自動的に生成します。「@NoArgsConstructor」は、引数を持たないデフォルトコンストラクタを自動的に生成します。
                    </p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-dot red"></span>
                            <span class="code-dot yellow"></span>
                            <span class="code-dot green"></span>
                            <span class="code-title">User.java - コンストラクタ自動生成</span>
                        </div>
                        <div class="code-content">
                            <pre><span class="code-keyword">package</span> com.example.demo.entity;

<span class="code-keyword">import</span> lombok.AllArgsConstructor;
<span class="code-keyword">import</span> lombok.Data;
<span class="code-keyword">import</span> lombok.NoArgsConstructor;

<span class="code-annotation">@Data</span>
<span class="code-annotation">@AllArgsConstructor</span>
<span class="code-annotation">@NoArgsConstructor</span>
<span class="code-keyword">public class</span> <span class="code-type">User</span> {
    <span class="code-comment">/** 名前 */</span>
    <span class="code-keyword">private</span> <span class="code-type">String</span> name;
    <span class="code-comment">/** 年齢 */</span>
    <span class="code-keyword">private int</span> age;
}</pre>
                        </div>
                    </div>

                    <div class="highlight-box success">
                        <p>
                            <strong>✅ Lombokの利点</strong
                            ><br />Lombokを利用することで、クラスのコードが大幅に短縮され、読みやすくなりました。手動でこれらのメソッドを書くと、後でクラスのフィールドを変更したときにメソッドも更新する必要があるので面倒です。Lombokを使用すると、これらのメソッドは自動的に生成されるため、このような手間が省けます。それによりコードのボイラープレート（繰り返し書かれるコードの断片）を書く時間が省けるため、開発の速度が向上します。
                        </p>
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <footer class="chapter-footer">
                <p style="opacity: 0.7; font-size: 0.9rem; margin: 0">
                    第2章 基礎知識を身に付けよう - Spring Framework入門教材
                </p>
            </footer>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="footer-title"></div>
                <p>Spring Framework 入門チュートリアル</p>
            </div>
        </footer>

        <div class="page-nav">
            <a href="1spring-framework-tutorial.html" class="page-nav-btn prev">
                <span>←</span>
                <div>
                    <div class="page-nav-label">前の章</div>
                    <div class="page-nav-title">第1章</div>
                </div>
            </a>

            <a href="3di-tutorial.html" class="page-nav-btn next">
                <div>
                    <div class="page-nav-label">次の章</div>
                    <div class="page-nav-title">第3章</div>
                </div>
                <span>→</span>
            </a>
        </div>

        <script>
            function toggleMenu() {
                const toggle = document.querySelector(".nav-toggle");
                const menu = document.querySelector(".nav-menu");
                toggle.classList.toggle("active");
                menu.classList.toggle("active");
            }

            document.addEventListener("click", function (e) {
                const nav = document.querySelector(".global-nav");
                const toggle = document.querySelector(".nav-toggle");
                const menu = document.querySelector(".nav-menu");

                if (!nav.contains(e.target) && menu.classList.contains("active")) {
                    toggle.classList.remove("active");
                    menu.classList.remove("active");
                }
            });

            window.addEventListener("resize", function () {
                if (window.innerWidth >= 1024) {
                    const toggle = document.querySelector(".nav-toggle");
                    const menu = document.querySelector(".nav-menu");
                    toggle.classList.remove("active");
                    menu.classList.remove("active");
                }
            });
        </script>
    </body>
</html>
